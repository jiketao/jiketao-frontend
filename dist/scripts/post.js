!function n(t,e,r){function o(i,a){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(u)return u(i,!0);throw new Error("Cannot find module '"+i+"'")}var f=e[i]={exports:{}};t[i][0].call(f.exports,function(n){var e=t[i][1][n];return o(e?e:n)},f,f.exports,n,t,e,r)}return e[i].exports}for(var u="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(n,t,e){(function(n){(function(){function r(n,t){if(n!==t){var e=null===n,r=n===O,o=n===n,u=null===t,i=t===O,a=t===t;if(n>t&&!u||!o||e&&!i&&a||r&&a)return 1;if(t>n&&!e||!a||u&&!r&&o||i&&o)return-1}return 0}function o(n,t,e){for(var r=n.length,o=e?r:-1;e?o--:++o<r;)if(t(n[o],o,n))return o;return-1}function u(n,t,e){if(t!==t)return d(n,e);for(var r=e-1,o=n.length;++r<o;)if(n[r]===t)return r;return-1}function i(n){return"function"==typeof n||!1}function a(n){return null==n?"":n+""}function c(n,t){for(var e=-1,r=n.length;++e<r&&t.indexOf(n.charAt(e))>-1;);return e}function f(n,t){for(var e=n.length;e--&&t.indexOf(n.charAt(e))>-1;);return e}function l(n,t){return r(n.criteria,t.criteria)||n.index-t.index}function s(n,t,e){for(var o=-1,u=n.criteria,i=t.criteria,a=u.length,c=e.length;++o<a;){var f=r(u[o],i[o]);if(f){if(o>=c)return f;var l=e[o];return f*("asc"===l||l===!0?1:-1)}}return n.index-t.index}function p(n){return Kn[n]}function h(n){return Jn[n]}function v(n,t,e){return t?n=Yn[n]:e&&(n=Gn[n]),"\\"+n}function g(n){return"\\"+Gn[n]}function d(n,t,e){for(var r=n.length,o=t+(e?0:-1);e?o--:++o<r;){var u=n[o];if(u!==u)return o}return-1}function m(n){return!!n&&"object"==typeof n}function _(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function y(n,t){for(var e=-1,r=n.length,o=-1,u=[];++e<r;)n[e]===t&&(n[e]=z,u[++o]=e);return u}function b(n,t){for(var e,r=-1,o=n.length,u=-1,i=[];++r<o;){var a=n[r],c=t?t(a,r,n):a;r&&e===c||(e=c,i[++u]=a)}return i}function w(n){for(var t=-1,e=n.length;++t<e&&_(n.charCodeAt(t)););return t}function x(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function j(n){return Hn[n]}function E(n){function t(n){if(m(n)&&!Aa(n)&&!(n instanceof X)){if(n instanceof _)return n;if(ti.call(n,"__chain__")&&ti.call(n,"__wrapped__"))return hr(n)}return new _(n)}function e(){}function _(n,t,e){this.__wrapped__=n,this.__actions__=e||[],this.__chain__=!!t}function X(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ri,this.__views__=[]}function tn(){var n=new X(this.__wrapped__);return n.__actions__=tt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=tt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=tt(this.__views__),n}function rn(){if(this.__filtered__){var n=new X(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Kn(){var n=this.__wrapped__.value(),t=this.__dir__,e=Aa(n),r=0>t,o=e?n.length:0,u=Je(0,o,this.__views__),i=u.start,a=u.end,c=a-i,f=r?a:i-1,l=this.__iteratees__,s=l.length,p=0,h=ji(c,this.__takeCount__);if(!e||q>o||o==c&&h==c)return re(r&&e?n.reverse():n,this.__actions__);var v=[];n:for(;c--&&h>p;){f+=t;for(var g=-1,d=n[f];++g<s;){var m=l[g],_=m.iteratee,y=m.type,b=_(d);if(y==W)d=b;else if(!b){if(y==$)continue n;break n}}v[p++]=d}return v}function Jn(){this.__data__={}}function Hn(n){return this.has(n)&&delete this.__data__[n]}function Vn(n){return"__proto__"==n?O:this.__data__[n]}function Yn(n){return"__proto__"!=n&&ti.call(this.__data__,n)}function Gn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Xn(n){var t=n?n.length:0;for(this.data={hash:mi(null),set:new si};t--;)this.push(n[t])}function Zn(n,t){var e=n.data,r="string"==typeof t||Fo(t)?e.set.has(t):e.hash[t];return r?0:-1}function Qn(n){var t=this.data;"string"==typeof n||Fo(n)?t.set.add(n):t.hash[n]=!0}function nt(n,t){for(var e=-1,r=n.length,o=-1,u=t.length,i=$u(r+u);++e<r;)i[e]=n[e];for(;++o<u;)i[e++]=t[o];return i}function tt(n,t){var e=-1,r=n.length;for(t||(t=$u(r));++e<r;)t[e]=n[e];return t}function et(n,t){for(var e=-1,r=n.length;++e<r&&t(n[e],e,n)!==!1;);return n}function ut(n,t){for(var e=n.length;e--&&t(n[e],e,n)!==!1;);return n}function it(n,t){for(var e=-1,r=n.length;++e<r;)if(!t(n[e],e,n))return!1;return!0}function at(n,t,e,r){for(var o=-1,u=n.length,i=r,a=i;++o<u;){var c=n[o],f=+t(c);e(f,i)&&(i=f,a=c)}return a}function ct(n,t){for(var e=-1,r=n.length,o=-1,u=[];++e<r;){var i=n[e];t(i,e,n)&&(u[++o]=i)}return u}function ft(n,t){for(var e=-1,r=n.length,o=$u(r);++e<r;)o[e]=t(n[e],e,n);return o}function lt(n,t){for(var e=-1,r=t.length,o=n.length;++e<r;)n[o+e]=t[e];return n}function st(n,t,e,r){var o=-1,u=n.length;for(r&&u&&(e=n[++o]);++o<u;)e=t(e,n[o],o,n);return e}function pt(n,t,e,r){var o=n.length;for(r&&o&&(e=n[--o]);o--;)e=t(e,n[o],o,n);return e}function ht(n,t){for(var e=-1,r=n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}function vt(n,t){for(var e=n.length,r=0;e--;)r+=+t(n[e])||0;return r}function gt(n,t){return n===O?t:n}function dt(n,t,e,r){return n!==O&&ti.call(r,e)?n:t}function mt(n,t,e){for(var r=-1,o=qa(t),u=o.length;++r<u;){var i=o[r],a=n[i],c=e(a,t[i],i,n,t);(c===c?c===a:a!==a)&&(a!==O||i in n)||(n[i]=c)}return n}function _t(n,t){return null==t?n:bt(t,qa(t),n)}function yt(n,t){for(var e=-1,r=null==n,o=!r&&Xe(n),u=o?n.length:0,i=t.length,a=$u(i);++e<i;){var c=t[e];a[e]=o?Ze(c,u)?n[c]:O:r?O:n[c]}return a}function bt(n,t,e){e||(e={});for(var r=-1,o=t.length;++r<o;){var u=t[r];e[u]=n[u]}return e}function wt(n,t,e){var r=typeof n;return"function"==r?t===O?n:ie(n,t,e):null==n?Ru:"object"==r?qt(n):t===O?Su(n):$t(n,t)}function xt(n,t,e,r,o,u,i){var a;if(e&&(a=o?e(n,r,o):e(n)),a!==O)return a;if(!Fo(n))return n;var c=Aa(n);if(c){if(a=He(n),!t)return tt(n,a)}else{var f=ri.call(n),l=f==G;if(f!=Q&&f!=K&&(!l||o))return zn[f]?Ye(n,f,t):o?n:{};if(a=Ve(l?{}:n),!t)return _t(a,n)}u||(u=[]),i||(i=[]);for(var s=u.length;s--;)if(u[s]==n)return i[s];return u.push(n),i.push(a),(c?et:Tt)(n,function(r,o){a[o]=xt(r,t,e,o,n,u,i)}),a}function jt(n,t,e){if("function"!=typeof n)throw new Gu(L);return pi(function(){n.apply(O,e)},t)}function Et(n,t){var e=n?n.length:0,r=[];if(!e)return r;var o=-1,i=Le(),a=i==u,c=a&&t.length>=q?ge(t):null,f=t.length;c&&(i=Zn,a=!1,t=c);n:for(;++o<e;){var l=n[o];if(a&&l===l){for(var s=f;s--;)if(t[s]===l)continue n;r.push(l)}else i(t,l,0)<0&&r.push(l)}return r}function Ot(n,t){var e=!0;return Di(n,function(n,r,o){return e=!!t(n,r,o)}),e}function Ct(n,t,e,r){var o=r,u=o;return Di(n,function(n,i,a){var c=+t(n,i,a);(e(c,o)||c===r&&c===u)&&(o=c,u=n)}),u}function kt(n,t,e,r){var o=n.length;for(e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),r=r===O||r>o?o:+r||0,0>r&&(r+=o),o=e>r?0:r>>>0,e>>>=0;o>e;)n[e++]=t;return n}function Rt(n,t){var e=[];return Di(n,function(n,r,o){t(n,r,o)&&e.push(n)}),e}function At(n,t,e,r){var o;return e(n,function(n,e,u){return t(n,e,u)?(o=r?e:n,!1):void 0}),o}function Pt(n,t,e,r){r||(r=[]);for(var o=-1,u=n.length;++o<u;){var i=n[o];m(i)&&Xe(i)&&(e||Aa(i)||Co(i))?t?Pt(i,t,e,r):lt(r,i):e||(r[r.length]=i)}return r}function It(n,t){return Bi(n,t,tu)}function Tt(n,t){return Bi(n,t,qa)}function Nt(n,t){return Ui(n,t,qa)}function St(n,t){for(var e=-1,r=t.length,o=-1,u=[];++e<r;){var i=t[e];So(n[i])&&(u[++o]=i)}return u}function Ft(n,t,e){if(null!=n){e!==O&&e in sr(n)&&(t=[e]);for(var r=0,o=t.length;null!=n&&o>r;)n=n[t[r++]];return r&&r==o?n:O}}function Dt(n,t,e,r,o,u){return n===t?!0:null==n||null==t||!Fo(n)&&!m(t)?n!==n&&t!==t:Mt(n,t,Dt,e,r,o,u)}function Mt(n,t,e,r,o,u,i){var a=Aa(n),c=Aa(t),f=J,l=J;a||(f=ri.call(n),f==K?f=Q:f!=Q&&(a=zo(n))),c||(l=ri.call(t),l==K?l=Q:l!=Q&&(c=zo(t)));var s=f==Q,p=l==Q,h=f==l;if(h&&!a&&!s)return Ue(n,t,f);if(!o){var v=s&&ti.call(n,"__wrapped__"),g=p&&ti.call(t,"__wrapped__");if(v||g)return e(v?n.value():n,g?t.value():t,r,o,u,i)}if(!h)return!1;u||(u=[]),i||(i=[]);for(var d=u.length;d--;)if(u[d]==n)return i[d]==t;u.push(n),i.push(t);var m=(a?Be:qe)(n,t,e,r,o,u,i);return u.pop(),i.pop(),m}function Bt(n,t,e){var r=t.length,o=r,u=!e;if(null==n)return!o;for(n=sr(n);r--;){var i=t[r];if(u&&i[2]?i[1]!==n[i[0]]:!(i[0]in n))return!1}for(;++r<o;){i=t[r];var a=i[0],c=n[a],f=i[1];if(u&&i[2]){if(c===O&&!(a in n))return!1}else{var l=e?e(c,f,a):O;if(!(l===O?Dt(f,c,e,!0):l))return!1}}return!0}function Ut(n,t){var e=-1,r=Xe(n)?$u(n.length):[];return Di(n,function(n,o,u){r[++e]=t(n,o,u)}),r}function qt(n){var t=ze(n);if(1==t.length&&t[0][2]){var e=t[0][0],r=t[0][1];return function(n){return null==n?!1:n[e]===r&&(r!==O||e in sr(n))}}return function(n){return Bt(n,t)}}function $t(n,t){var e=Aa(n),r=nr(n)&&rr(t),o=n+"";return n=pr(n),function(u){if(null==u)return!1;var i=o;if(u=sr(u),!(!e&&r||i in u)){if(u=1==n.length?u:Ft(u,Yt(n,0,-1)),null==u)return!1;i=Cr(n),u=sr(u)}return u[i]===t?t!==O||i in u:Dt(t,u[i],O,!0)}}function Wt(n,t,e,r,o){if(!Fo(n))return n;var u=Xe(t)&&(Aa(t)||zo(t)),i=u?O:qa(t);return et(i||t,function(a,c){if(i&&(c=a,a=t[c]),m(a))r||(r=[]),o||(o=[]),Lt(n,t,c,Wt,e,r,o);else{var f=n[c],l=e?e(f,a,c,n,t):O,s=l===O;s&&(l=a),l===O&&(!u||c in n)||!s&&(l===l?l===f:f!==f)||(n[c]=l)}}),n}function Lt(n,t,e,r,o,u,i){for(var a=u.length,c=t[e];a--;)if(u[a]==c)return void(n[e]=i[a]);var f=n[e],l=o?o(f,c,e,n,t):O,s=l===O;s&&(l=c,Xe(c)&&(Aa(c)||zo(c))?l=Aa(f)?f:Xe(f)?tt(f):[]:$o(c)||Co(c)?l=Co(f)?Yo(f):$o(f)?f:{}:s=!1),u.push(c),i.push(l),s?n[e]=r(l,c,o,u,i):(l===l?l!==f:f===f)&&(n[e]=l)}function zt(n){return function(t){return null==t?O:t[n]}}function Kt(n){var t=n+"";return n=pr(n),function(e){return Ft(e,n,t)}}function Jt(n,t){for(var e=n?t.length:0;e--;){var r=t[e];if(r!=o&&Ze(r)){var o=r;hi.call(n,r,1)}}return n}function Ht(n,t){return n+_i(Ci()*(t-n+1))}function Vt(n,t,e,r,o){return o(n,function(n,o,u){e=r?(r=!1,n):t(e,n,o,u)}),e}function Yt(n,t,e){var r=-1,o=n.length;t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),e=e===O||e>o?o:+e||0,0>e&&(e+=o),o=t>e?0:e-t>>>0,t>>>=0;for(var u=$u(o);++r<o;)u[r]=n[r+t];return u}function Gt(n,t){var e;return Di(n,function(n,r,o){return e=t(n,r,o),!e}),!!e}function Xt(n,t){var e=n.length;for(n.sort(t);e--;)n[e]=n[e].value;return n}function Zt(n,t,e){var r=$e(),o=-1;t=ft(t,function(n){return r(n)});var u=Ut(n,function(n){var e=ft(t,function(t){return t(n)});return{criteria:e,index:++o,value:n}});return Xt(u,function(n,t){return s(n,t,e)})}function Qt(n,t){var e=0;return Di(n,function(n,r,o){e+=+t(n,r,o)||0}),e}function ne(n,t){var e=-1,r=Le(),o=n.length,i=r==u,a=i&&o>=q,c=a?ge():null,f=[];c?(r=Zn,i=!1):(a=!1,c=t?[]:f);n:for(;++e<o;){var l=n[e],s=t?t(l,e,n):l;if(i&&l===l){for(var p=c.length;p--;)if(c[p]===s)continue n;t&&c.push(s),f.push(l)}else r(c,s,0)<0&&((t||a)&&c.push(s),f.push(l))}return f}function te(n,t){for(var e=-1,r=t.length,o=$u(r);++e<r;)o[e]=n[t[e]];return o}function ee(n,t,e,r){for(var o=n.length,u=r?o:-1;(r?u--:++u<o)&&t(n[u],u,n););return e?Yt(n,r?0:u,r?u+1:o):Yt(n,r?u+1:0,r?o:u)}function re(n,t){var e=n;e instanceof X&&(e=e.value());for(var r=-1,o=t.length;++r<o;){var u=t[r];e=u.func.apply(u.thisArg,lt([e],u.args))}return e}function oe(n,t,e){var r=0,o=n?n.length:r;if("number"==typeof t&&t===t&&Ii>=o){for(;o>r;){var u=r+o>>>1,i=n[u];(e?t>=i:t>i)&&null!==i?r=u+1:o=u}return o}return ue(n,t,Ru,e)}function ue(n,t,e,r){t=e(t);for(var o=0,u=n?n.length:0,i=t!==t,a=null===t,c=t===O;u>o;){var f=_i((o+u)/2),l=e(n[f]),s=l!==O,p=l===l;if(i)var h=p||r;else h=a?p&&s&&(r||null!=l):c?p&&(r||s):null==l?!1:r?t>=l:t>l;h?o=f+1:u=f}return ji(u,Pi)}function ie(n,t,e){if("function"!=typeof n)return Ru;if(t===O)return n;switch(e){case 1:return function(e){return n.call(t,e)};case 3:return function(e,r,o){return n.call(t,e,r,o)};case 4:return function(e,r,o,u){return n.call(t,e,r,o,u)};case 5:return function(e,r,o,u,i){return n.call(t,e,r,o,u,i)}}return function(){return n.apply(t,arguments)}}function ae(n){var t=new ii(n.byteLength),e=new vi(t);return e.set(new vi(n)),t}function ce(n,t,e){for(var r=e.length,o=-1,u=xi(n.length-r,0),i=-1,a=t.length,c=$u(a+u);++i<a;)c[i]=t[i];for(;++o<r;)c[e[o]]=n[o];for(;u--;)c[i++]=n[o++];return c}function fe(n,t,e){for(var r=-1,o=e.length,u=-1,i=xi(n.length-o,0),a=-1,c=t.length,f=$u(i+c);++u<i;)f[u]=n[u];for(var l=u;++a<c;)f[l+a]=t[a];for(;++r<o;)f[l+e[r]]=n[u++];return f}function le(n,t){return function(e,r,o){var u=t?t():{};if(r=$e(r,o,3),Aa(e))for(var i=-1,a=e.length;++i<a;){var c=e[i];n(u,c,r(c,i,e),e)}else Di(e,function(t,e,o){n(u,t,r(t,e,o),o)});return u}}function se(n){return _o(function(t,e){var r=-1,o=null==t?0:e.length,u=o>2?e[o-2]:O,i=o>2?e[2]:O,a=o>1?e[o-1]:O;for("function"==typeof u?(u=ie(u,a,5),o-=2):(u="function"==typeof a?a:O,o-=u?1:0),i&&Qe(e[0],e[1],i)&&(u=3>o?O:u,o=1);++r<o;){var c=e[r];c&&n(t,c,u)}return t})}function pe(n,t){return function(e,r){var o=e?Wi(e):0;if(!er(o))return n(e,r);for(var u=t?o:-1,i=sr(e);(t?u--:++u<o)&&r(i[u],u,i)!==!1;);return e}}function he(n){return function(t,e,r){for(var o=sr(t),u=r(t),i=u.length,a=n?i:-1;n?a--:++a<i;){var c=u[a];if(e(o[c],c,o)===!1)break}return t}}function ve(n,t){function e(){var o=this&&this!==rt&&this instanceof e?r:n;return o.apply(t,arguments)}var r=me(n);return e}function ge(n){return mi&&si?new Xn(n):null}function de(n){return function(t){for(var e=-1,r=Ou(su(t)),o=r.length,u="";++e<o;)u=n(u,r[e],e);return u}}function me(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Fi(n.prototype),r=n.apply(e,t);return Fo(r)?r:e}}function _e(n){function t(e,r,o){o&&Qe(e,r,o)&&(r=O);var u=Me(e,n,O,O,O,O,O,r);return u.placeholder=t.placeholder,u}return t}function ye(n,t){return _o(function(e){var r=e[0];return null==r?r:(e.push(t),n.apply(O,e))})}function be(n,t){return function(e,r,o){if(o&&Qe(e,r,o)&&(r=O),r=$e(r,o,3),1==r.length){e=Aa(e)?e:lr(e);var u=at(e,r,n,t);if(!e.length||u!==t)return u}return Ct(e,r,n,t)}}function we(n,t){return function(e,r,u){if(r=$e(r,u,3),Aa(e)){var i=o(e,r,t);return i>-1?e[i]:O}return At(e,r,n)}}function xe(n){return function(t,e,r){return t&&t.length?(e=$e(e,r,3),o(t,e,n)):-1}}function je(n){return function(t,e,r){return e=$e(e,r,3),At(t,e,n,!0)}}function Ee(n){return function(){for(var t,e=arguments.length,r=n?e:-1,o=0,u=$u(e);n?r--:++r<e;){var i=u[o++]=arguments[r];if("function"!=typeof i)throw new Gu(L);!t&&_.prototype.thru&&"wrapper"==We(i)&&(t=new _([],!0))}for(r=t?-1:e;++r<e;){i=u[r];var a=We(i),c="wrapper"==a?$i(i):O;t=c&&tr(c[0])&&c[1]==(S|P|T|F)&&!c[4].length&&1==c[9]?t[We(c[0])].apply(t,c[3]):1==i.length&&tr(i)?t[a]():t.thru(i)}return function(){var n=arguments,r=n[0];if(t&&1==n.length&&Aa(r)&&r.length>=q)return t.plant(r).value();for(var o=0,i=e?u[o].apply(this,n):r;++o<e;)i=u[o].call(this,i);return i}}}function Oe(n,t){return function(e,r,o){return"function"==typeof r&&o===O&&Aa(e)?n(e,r):t(e,ie(r,o,3))}}function Ce(n){return function(t,e,r){return("function"!=typeof e||r!==O)&&(e=ie(e,r,3)),n(t,e,tu)}}function ke(n){return function(t,e,r){return("function"!=typeof e||r!==O)&&(e=ie(e,r,3)),n(t,e)}}function Re(n){return function(t,e,r){var o={};return e=$e(e,r,3),Tt(t,function(t,r,u){var i=e(t,r,u);r=n?i:r,t=n?t:i,o[r]=t}),o}}function Ae(n){return function(t,e,r){return t=a(t),(n?t:"")+Ne(t,e,r)+(n?"":t)}}function Pe(n){var t=_o(function(e,r){var o=y(r,t.placeholder);return Me(e,n,O,r,o)});return t}function Ie(n,t){return function(e,r,o,u){var i=arguments.length<3;return"function"==typeof r&&u===O&&Aa(e)?n(e,r,o,i):Vt(e,$e(r,u,4),o,i,t)}}function Te(n,t,e,r,o,u,i,a,c,f){function l(){for(var _=arguments.length,b=_,w=$u(_);b--;)w[b]=arguments[b];if(r&&(w=ce(w,r,o)),u&&(w=fe(w,u,i)),v||d){var x=l.placeholder,j=y(w,x);if(_-=j.length,f>_){var E=a?tt(a):O,C=xi(f-_,0),A=v?j:O,P=v?O:j,I=v?w:O,S=v?O:w;t|=v?T:N,t&=~(v?N:T),g||(t&=~(k|R));var F=[n,t,e,I,A,S,P,E,c,C],D=Te.apply(O,F);return tr(n)&&Li(D,F),D.placeholder=x,D}}var M=p?e:this,B=h?M[n]:n;return a&&(w=cr(w,a)),s&&c<w.length&&(w.length=c),this&&this!==rt&&this instanceof l&&(B=m||me(n)),B.apply(M,w)}var s=t&S,p=t&k,h=t&R,v=t&P,g=t&A,d=t&I,m=h?O:me(n);return l}function Ne(n,t,e){var r=n.length;if(t=+t,r>=t||!bi(t))return"";var o=t-r;return e=null==e?" ":e+"",mu(e,di(o/e.length)).slice(0,o)}function Se(n,t,e,r){function o(){for(var t=-1,a=arguments.length,c=-1,f=r.length,l=$u(f+a);++c<f;)l[c]=r[c];for(;a--;)l[c++]=arguments[++t];var s=this&&this!==rt&&this instanceof o?i:n;return s.apply(u?e:this,l)}var u=t&k,i=me(n);return o}function Fe(n){var t=Ku[n];return function(n,e){return e=e===O?0:+e||0,e?(e=fi(10,e),t(n*e)/e):t(n)}}function De(n){return function(t,e,r,o){var u=$e(r);return null==r&&u===wt?oe(t,e,n):ue(t,e,u(r,o,1),n)}}function Me(n,t,e,r,o,u,i,a){var c=t&R;if(!c&&"function"!=typeof n)throw new Gu(L);var f=r?r.length:0;if(f||(t&=~(T|N),r=o=O),f-=o?o.length:0,t&N){var l=r,s=o;r=o=O}var p=c?O:$i(n),h=[n,t,e,r,o,l,s,u,i,a];if(p&&(or(h,p),t=h[1],a=h[9]),h[9]=null==a?c?0:n.length:xi(a-f,0)||0,t==k)var v=ve(h[0],h[2]);else v=t!=T&&t!=(k|T)||h[4].length?Te.apply(O,h):Se.apply(O,h);var g=p?qi:Li;return g(v,h)}function Be(n,t,e,r,o,u,i){var a=-1,c=n.length,f=t.length;if(c!=f&&!(o&&f>c))return!1;for(;++a<c;){var l=n[a],s=t[a],p=r?r(o?s:l,o?l:s,a):O;if(p!==O){if(p)continue;return!1}if(o){if(!ht(t,function(n){return l===n||e(l,n,r,o,u,i)}))return!1}else if(l!==s&&!e(l,s,r,o,u,i))return!1}return!0}function Ue(n,t,e){switch(e){case H:case V:return+n==+t;case Y:return n.name==t.name&&n.message==t.message;case Z:return n!=+n?t!=+t:n==+t;case nn:case en:return n==t+""}return!1}function qe(n,t,e,r,o,u,i){var a=qa(n),c=a.length,f=qa(t),l=f.length;if(c!=l&&!o)return!1;for(var s=c;s--;){var p=a[s];if(!(o?p in t:ti.call(t,p)))return!1}for(var h=o;++s<c;){p=a[s];var v=n[p],g=t[p],d=r?r(o?g:v,o?v:g,p):O;if(!(d===O?e(v,g,r,o,u,i):d))return!1;h||(h="constructor"==p)}if(!h){var m=n.constructor,_=t.constructor;if(m!=_&&"constructor"in n&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _))return!1}return!0}function $e(n,e,r){var o=t.callback||Cu;return o=o===Cu?wt:o,r?o(n,e,r):o}function We(n){for(var t=n.name,e=Si[t],r=e?e.length:0;r--;){var o=e[r],u=o.func;if(null==u||u==n)return o.name}return t}function Le(n,e,r){var o=t.indexOf||Er;return o=o===Er?u:o,n?o(n,e,r):o}function ze(n){for(var t=eu(n),e=t.length;e--;)t[e][2]=rr(t[e][1]);return t}function Ke(n,t){var e=null==n?O:n[t];return Bo(e)?e:O}function Je(n,t,e){for(var r=-1,o=e.length;++r<o;){var u=e[r],i=u.size;switch(u.type){case"drop":n+=i;break;case"dropRight":t-=i;break;case"take":t=ji(t,n+i);break;case"takeRight":n=xi(n,t-i)}}return{start:n,end:t}}function He(n){var t=n.length,e=new n.constructor(t);return t&&"string"==typeof n[0]&&ti.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function Ve(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Hu),new t}function Ye(n,t,e){var r=n.constructor;switch(t){case on:return ae(n);case H:case V:return new r(+n);case un:case an:case cn:case fn:case ln:case sn:case pn:case hn:case vn:var o=n.buffer;return new r(e?ae(o):o,n.byteOffset,n.length);case Z:case en:return new r(n);case nn:var u=new r(n.source,Nn.exec(n));u.lastIndex=n.lastIndex}return u}function Ge(n,t,e){null==n||nr(t,n)||(t=pr(t),n=1==t.length?n:Ft(n,Yt(t,0,-1)),t=Cr(t));var r=null==n?n:n[t];return null==r?O:r.apply(n,e)}function Xe(n){return null!=n&&er(Wi(n))}function Ze(n,t){return n="number"==typeof n||Dn.test(n)?+n:-1,t=null==t?Ti:t,n>-1&&n%1==0&&t>n}function Qe(n,t,e){if(!Fo(e))return!1;var r=typeof t;if("number"==r?Xe(e)&&Ze(t,e.length):"string"==r&&t in e){var o=e[t];return n===n?n===o:o!==o}return!1}function nr(n,t){var e=typeof n;if("string"==e&&Cn.test(n)||"number"==e)return!0;if(Aa(n))return!1;var r=!On.test(n);return r||null!=t&&n in sr(t)}function tr(n){var e=We(n);if(!(e in X.prototype))return!1;var r=t[e];if(n===r)return!0;var o=$i(r);return!!o&&n===o[0]}function er(n){return"number"==typeof n&&n>-1&&n%1==0&&Ti>=n}function rr(n){return n===n&&!Fo(n)}function or(n,t){var e=n[1],r=t[1],o=e|r,u=S>o,i=r==S&&e==P||r==S&&e==F&&n[7].length<=t[8]||r==(S|F)&&e==P;if(!u&&!i)return n;r&k&&(n[2]=t[2],o|=e&k?0:A);var a=t[3];if(a){var c=n[3];n[3]=c?ce(c,a,t[4]):tt(a),n[4]=c?y(n[3],z):tt(t[4])}return a=t[5],a&&(c=n[5],n[5]=c?fe(c,a,t[6]):tt(a),n[6]=c?y(n[5],z):tt(t[6])),a=t[7],a&&(n[7]=tt(a)),r&S&&(n[8]=null==n[8]?t[8]:ji(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=o,n}function ur(n,t){return n===O?t:Pa(n,t,ur)}function ir(n,t){n=sr(n);for(var e=-1,r=t.length,o={};++e<r;){var u=t[e];u in n&&(o[u]=n[u])}return o}function ar(n,t){var e={};return It(n,function(n,r,o){t(n,r,o)&&(e[r]=n)}),e}function cr(n,t){for(var e=n.length,r=ji(t.length,e),o=tt(n);r--;){var u=t[r];n[r]=Ze(u,e)?o[u]:O}return n}function fr(n){for(var t=tu(n),e=t.length,r=e&&n.length,o=!!r&&er(r)&&(Aa(n)||Co(n)),u=-1,i=[];++u<e;){var a=t[u];(o&&Ze(a,r)||ti.call(n,a))&&i.push(a)}return i}function lr(n){return null==n?[]:Xe(n)?Fo(n)?n:Hu(n):iu(n)}function sr(n){return Fo(n)?n:Hu(n)}function pr(n){if(Aa(n))return n;var t=[];return a(n).replace(kn,function(n,e,r,o){t.push(r?o.replace(In,"$1"):e||n)}),t}function hr(n){return n instanceof X?n.clone():new _(n.__wrapped__,n.__chain__,tt(n.__actions__))}function vr(n,t,e){t=(e?Qe(n,t,e):null==t)?1:xi(_i(t)||1,1);for(var r=0,o=n?n.length:0,u=-1,i=$u(di(o/t));o>r;)i[++u]=Yt(n,r,r+=t);return i}function gr(n){for(var t=-1,e=n?n.length:0,r=-1,o=[];++t<e;){var u=n[t];u&&(o[++r]=u)}return o}function dr(n,t,e){var r=n?n.length:0;return r?((e?Qe(n,t,e):null==t)&&(t=1),Yt(n,0>t?0:t)):[]}function mr(n,t,e){var r=n?n.length:0;return r?((e?Qe(n,t,e):null==t)&&(t=1),t=r-(+t||0),Yt(n,0,0>t?0:t)):[]}function _r(n,t,e){return n&&n.length?ee(n,$e(t,e,3),!0,!0):[]}function yr(n,t,e){return n&&n.length?ee(n,$e(t,e,3),!0):[]}function br(n,t,e,r){var o=n?n.length:0;return o?(e&&"number"!=typeof e&&Qe(n,t,e)&&(e=0,r=o),kt(n,t,e,r)):[]}function wr(n){return n?n[0]:O}function xr(n,t,e){var r=n?n.length:0;return e&&Qe(n,t,e)&&(t=!1),r?Pt(n,t):[]}function jr(n){var t=n?n.length:0;return t?Pt(n,!0):[]}function Er(n,t,e){var r=n?n.length:0;if(!r)return-1;if("number"==typeof e)e=0>e?xi(r+e,0):e;else if(e){var o=oe(n,t);return r>o&&(t===t?t===n[o]:n[o]!==n[o])?o:-1}return u(n,t,e||0)}function Or(n){return mr(n,1)}function Cr(n){var t=n?n.length:0;return t?n[t-1]:O}function kr(n,t,e){var r=n?n.length:0;if(!r)return-1;var o=r;if("number"==typeof e)o=(0>e?xi(r+e,0):ji(e||0,r-1))+1;else if(e){o=oe(n,t,!0)-1;var u=n[o];return(t===t?t===u:u!==u)?o:-1}if(t!==t)return d(n,o,!0);for(;o--;)if(n[o]===t)return o;return-1}function Rr(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var e=0,r=Le(),o=n.length;++e<o;)for(var u=0,i=n[e];(u=r(t,i,u))>-1;)hi.call(t,u,1);return t}function Ar(n,t,e){var r=[];if(!n||!n.length)return r;var o=-1,u=[],i=n.length;for(t=$e(t,e,3);++o<i;){var a=n[o];t(a,o,n)&&(r.push(a),u.push(o))}return Jt(n,u),r}function Pr(n){return dr(n,1)}function Ir(n,t,e){var r=n?n.length:0;return r?(e&&"number"!=typeof e&&Qe(n,t,e)&&(t=0,e=r),Yt(n,t,e)):[]}function Tr(n,t,e){var r=n?n.length:0;return r?((e?Qe(n,t,e):null==t)&&(t=1),Yt(n,0,0>t?0:t)):[]}function Nr(n,t,e){var r=n?n.length:0;return r?((e?Qe(n,t,e):null==t)&&(t=1),t=r-(+t||0),Yt(n,0>t?0:t)):[]}function Sr(n,t,e){return n&&n.length?ee(n,$e(t,e,3),!1,!0):[]}function Fr(n,t,e){return n&&n.length?ee(n,$e(t,e,3)):[]}function Dr(n,t,e,r){var o=n?n.length:0;if(!o)return[];null!=t&&"boolean"!=typeof t&&(r=e,e=Qe(n,t,r)?O:t,t=!1);var i=$e();return(null!=e||i!==wt)&&(e=i(e,r,3)),t&&Le()==u?b(n,e):ne(n,e)}function Mr(n){if(!n||!n.length)return[];var t=-1,e=0;n=ct(n,function(n){return Xe(n)?(e=xi(n.length,e),!0):void 0});for(var r=$u(e);++t<e;)r[t]=ft(n,zt(t));return r}function Br(n,t,e){var r=n?n.length:0;if(!r)return[];var o=Mr(n);return null==t?o:(t=ie(t,e,4),ft(o,function(n){return st(n,t,O,!0)}))}function Ur(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(Xe(e))var r=r?lt(Et(r,e),Et(e,r)):e}return r?ne(r):[]}function qr(n,t){var e=-1,r=n?n.length:0,o={};for(!r||t||Aa(n[0])||(t=[]);++e<r;){var u=n[e];t?o[u]=t[e]:u&&(o[u[0]]=u[1])}return o}function $r(n){var e=t(n);return e.__chain__=!0,e}function Wr(n,t,e){return t.call(e,n),n}function Lr(n,t,e){return t.call(e,n)}function zr(){return $r(this)}function Kr(){return new _(this.value(),this.__chain__)}function Jr(n){for(var t,r=this;r instanceof e;){var o=hr(r);t?u.__wrapped__=o:t=o;var u=o;r=r.__wrapped__}return u.__wrapped__=n,t}function Hr(){var n=this.__wrapped__,t=function(n){return e&&e.__dir__<0?n:n.reverse()};if(n instanceof X){var e=n;return this.__actions__.length&&(e=new X(this)),e=e.reverse(),e.__actions__.push({func:Lr,args:[t],thisArg:O}),new _(e,this.__chain__)}return this.thru(t)}function Vr(){return this.value()+""}function Yr(){return re(this.__wrapped__,this.__actions__)}function Gr(n,t,e){var r=Aa(n)?it:Ot;return e&&Qe(n,t,e)&&(t=O),("function"!=typeof t||e!==O)&&(t=$e(t,e,3)),r(n,t)}function Xr(n,t,e){var r=Aa(n)?ct:Rt;return t=$e(t,e,3),r(n,t)}function Zr(n,t){return oa(n,qt(t))}function Qr(n,t,e,r){var o=n?Wi(n):0;return er(o)||(n=iu(n),o=n.length),e="number"!=typeof e||r&&Qe(t,e,r)?0:0>e?xi(o+e,0):e||0,"string"==typeof n||!Aa(n)&&Lo(n)?o>=e&&n.indexOf(t,e)>-1:!!o&&Le(n,t,e)>-1}function no(n,t,e){var r=Aa(n)?ft:Ut;return t=$e(t,e,3),r(n,t)}function to(n,t){return no(n,Su(t))}function eo(n,t,e){var r=Aa(n)?ct:Rt;return t=$e(t,e,3),r(n,function(n,e,r){return!t(n,e,r)})}function ro(n,t,e){if(e?Qe(n,t,e):null==t){n=lr(n);var r=n.length;return r>0?n[Ht(0,r-1)]:O}var o=-1,u=Vo(n),r=u.length,i=r-1;for(t=ji(0>t?0:+t||0,r);++o<t;){var a=Ht(o,i),c=u[a];u[a]=u[o],u[o]=c}return u.length=t,u}function oo(n){return ro(n,Ri)}function uo(n){var t=n?Wi(n):0;return er(t)?t:qa(n).length}function io(n,t,e){var r=Aa(n)?ht:Gt;return e&&Qe(n,t,e)&&(t=O),("function"!=typeof t||e!==O)&&(t=$e(t,e,3)),r(n,t)}function ao(n,t,e){if(null==n)return[];e&&Qe(n,t,e)&&(t=O);var r=-1;t=$e(t,e,3);var o=Ut(n,function(n,e,o){return{criteria:t(n,e,o),index:++r,value:n}});return Xt(o,l)}function co(n,t,e,r){return null==n?[]:(r&&Qe(t,e,r)&&(e=O),Aa(t)||(t=null==t?[]:[t]),Aa(e)||(e=null==e?[]:[e]),Zt(n,t,e))}function fo(n,t){return Xr(n,qt(t))}function lo(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Gu(L);var e=n;n=t,t=e}return n=bi(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function so(n,t,e){return e&&Qe(n,t,e)&&(t=O),t=n&&null==t?n.length:xi(+t||0,0),Me(n,S,O,O,O,O,t)}function po(n,t){var e;if("function"!=typeof t){if("function"!=typeof n)throw new Gu(L);var r=n;n=t,t=r}return function(){return--n>0&&(e=t.apply(this,arguments)),1>=n&&(t=O),e}}function ho(n,t,e){function r(){h&&ai(h),f&&ai(f),g=0,f=h=v=O}function o(t,e){e&&ai(e),f=h=v=O,t&&(g=ga(),l=n.apply(p,c),h||f||(c=p=O))}function u(){var n=t-(ga()-s);0>=n||n>t?o(v,f):h=pi(u,n)}function i(){o(m,h)}function a(){if(c=arguments,s=ga(),p=this,v=m&&(h||!_),d===!1)var e=_&&!h;else{f||_||(g=s);var r=d-(s-g),o=0>=r||r>d;o?(f&&(f=ai(f)),g=s,l=n.apply(p,c)):f||(f=pi(i,r))}return o&&h?h=ai(h):h||t===d||(h=pi(u,t)),e&&(o=!0,l=n.apply(p,c)),!o||h||f||(c=p=O),l}var c,f,l,s,p,h,v,g=0,d=!1,m=!0;if("function"!=typeof n)throw new Gu(L);if(t=0>t?0:+t||0,e===!0){var _=!0;m=!1}else Fo(e)&&(_=!!e.leading,d="maxWait"in e&&xi(+e.maxWait||0,t),m="trailing"in e?!!e.trailing:m);return a.cancel=r,a}function vo(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Gu(L);var e=function(){var r=arguments,o=t?t.apply(this,r):r[0],u=e.cache;if(u.has(o))return u.get(o);var i=n.apply(this,r);return e.cache=u.set(o,i),i};return e.cache=new vo.Cache,e}function go(n){if("function"!=typeof n)throw new Gu(L);return function(){return!n.apply(this,arguments)}}function mo(n){return po(2,n)}function _o(n,t){if("function"!=typeof n)throw new Gu(L);return t=xi(t===O?n.length-1:+t||0,0),function(){for(var e=arguments,r=-1,o=xi(e.length-t,0),u=$u(o);++r<o;)u[r]=e[t+r];switch(t){case 0:return n.call(this,u);case 1:return n.call(this,e[0],u);case 2:return n.call(this,e[0],e[1],u)}var i=$u(t+1);for(r=-1;++r<t;)i[r]=e[r];return i[t]=u,n.apply(this,i)}}function yo(n){if("function"!=typeof n)throw new Gu(L);return function(t){return n.apply(this,t)}}function bo(n,t,e){var r=!0,o=!0;if("function"!=typeof n)throw new Gu(L);return e===!1?r=!1:Fo(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),ho(n,t,{leading:r,maxWait:+t,trailing:o})}function wo(n,t){return t=null==t?Ru:t,Me(t,T,O,[n],[])}function xo(n,t,e,r){return t&&"boolean"!=typeof t&&Qe(n,t,e)?t=!1:"function"==typeof t&&(r=e,e=t,t=!1),"function"==typeof e?xt(n,t,ie(e,r,1)):xt(n,t)}function jo(n,t,e){return"function"==typeof t?xt(n,!0,ie(t,e,1)):xt(n,!0)}function Eo(n,t){return n>t}function Oo(n,t){return n>=t}function Co(n){return m(n)&&Xe(n)&&ti.call(n,"callee")&&!li.call(n,"callee")}function ko(n){return n===!0||n===!1||m(n)&&ri.call(n)==H}function Ro(n){return m(n)&&ri.call(n)==V}function Ao(n){return!!n&&1===n.nodeType&&m(n)&&!$o(n)}function Po(n){return null==n?!0:Xe(n)&&(Aa(n)||Lo(n)||Co(n)||m(n)&&So(n.splice))?!n.length:!qa(n).length}function Io(n,t,e,r){e="function"==typeof e?ie(e,r,3):O;var o=e?e(n,t):O;return o===O?Dt(n,t,e):!!o}function To(n){return m(n)&&"string"==typeof n.message&&ri.call(n)==Y}function No(n){return"number"==typeof n&&bi(n)}function So(n){return Fo(n)&&ri.call(n)==G}function Fo(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function Do(n,t,e,r){return e="function"==typeof e?ie(e,r,3):O,Bt(n,ze(t),e)}function Mo(n){return qo(n)&&n!=+n}function Bo(n){return null==n?!1:So(n)?ui.test(ni.call(n)):m(n)&&Fn.test(n)}function Uo(n){return null===n}function qo(n){return"number"==typeof n||m(n)&&ri.call(n)==Z}function $o(n){var t;if(!m(n)||ri.call(n)!=Q||Co(n)||!ti.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var e;return It(n,function(n,t){e=t}),e===O||ti.call(n,e)}function Wo(n){return Fo(n)&&ri.call(n)==nn}function Lo(n){return"string"==typeof n||m(n)&&ri.call(n)==en}function zo(n){return m(n)&&er(n.length)&&!!Ln[ri.call(n)]}function Ko(n){return n===O}function Jo(n,t){return t>n}function Ho(n,t){return t>=n}function Vo(n){var t=n?Wi(n):0;return er(t)?t?tt(n):[]:iu(n)}function Yo(n){return bt(n,tu(n))}function Go(n,t,e){var r=Fi(n);return e&&Qe(n,t,e)&&(t=O),t?_t(r,t):r}function Xo(n){return St(n,tu(n))}function Zo(n,t,e){var r=null==n?O:Ft(n,pr(t),t+"");return r===O?e:r}function Qo(n,t){if(null==n)return!1;var e=ti.call(n,t);if(!e&&!nr(t)){if(t=pr(t),n=1==t.length?n:Ft(n,Yt(t,0,-1)),null==n)return!1;t=Cr(t),e=ti.call(n,t)}return e||er(n.length)&&Ze(t,n.length)&&(Aa(n)||Co(n))}function nu(n,t,e){e&&Qe(n,t,e)&&(t=O);for(var r=-1,o=qa(n),u=o.length,i={};++r<u;){var a=o[r],c=n[a];t?ti.call(i,c)?i[c].push(a):i[c]=[a]:i[c]=a}return i}function tu(n){if(null==n)return[];Fo(n)||(n=Hu(n));var t=n.length;t=t&&er(t)&&(Aa(n)||Co(n))&&t||0;for(var e=n.constructor,r=-1,o="function"==typeof e&&e.prototype===n,u=$u(t),i=t>0;++r<t;)u[r]=r+"";for(var a in n)i&&Ze(a,t)||"constructor"==a&&(o||!ti.call(n,a))||u.push(a);return u}function eu(n){n=sr(n);for(var t=-1,e=qa(n),r=e.length,o=$u(r);++t<r;){var u=e[t];o[t]=[u,n[u]]}return o}function ru(n,t,e){var r=null==n?O:n[t];return r===O&&(null==n||nr(t,n)||(t=pr(t),n=1==t.length?n:Ft(n,Yt(t,0,-1)),r=null==n?O:n[Cr(t)]),r=r===O?e:r),So(r)?r.call(n):r}function ou(n,t,e){if(null==n)return n;var r=t+"";t=null!=n[r]||nr(t,n)?[r]:pr(t);for(var o=-1,u=t.length,i=u-1,a=n;null!=a&&++o<u;){var c=t[o];Fo(a)&&(o==i?a[c]=e:null==a[c]&&(a[c]=Ze(t[o+1])?[]:{})),a=a[c]}return n}function uu(n,t,e,r){var o=Aa(n)||zo(n);if(t=$e(t,r,4),null==e)if(o||Fo(n)){var u=n.constructor;e=o?Aa(n)?new u:[]:Fi(So(u)?u.prototype:O)}else e={};return(o?et:Tt)(n,function(n,r,o){return t(e,n,r,o)}),e}function iu(n){return te(n,qa(n))}function au(n){return te(n,tu(n))}function cu(n,t,e){return t=+t||0,
e===O?(e=t,t=0):e=+e||0,n>=ji(t,e)&&n<xi(t,e)}function fu(n,t,e){e&&Qe(n,t,e)&&(t=e=O);var r=null==n,o=null==t;if(null==e&&(o&&"boolean"==typeof n?(e=n,n=1):"boolean"==typeof t&&(e=t,o=!0)),r&&o&&(t=1,o=!1),n=+n||0,o?(t=n,n=0):t=+t||0,e||n%1||t%1){var u=Ci();return ji(n+u*(t-n+ci("1e-"+((u+"").length-1))),t)}return Ht(n,t)}function lu(n){return n=a(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function su(n){return n=a(n),n&&n.replace(Mn,p).replace(Pn,"")}function pu(n,t,e){n=a(n),t+="";var r=n.length;return e=e===O?r:ji(0>e?0:+e||0,r),e-=t.length,e>=0&&n.indexOf(t,e)==e}function hu(n){return n=a(n),n&&wn.test(n)?n.replace(yn,h):n}function vu(n){return n=a(n),n&&An.test(n)?n.replace(Rn,v):n||"(?:)"}function gu(n,t,e){n=a(n),t=+t;var r=n.length;if(r>=t||!bi(t))return n;var o=(t-r)/2,u=_i(o),i=di(o);return e=Ne("",i,e),e.slice(0,u)+n+e}function du(n,t,e){return(e?Qe(n,t,e):null==t)?t=0:t&&(t=+t),n=bu(n),Oi(n,t||(Sn.test(n)?16:10))}function mu(n,t){var e="";if(n=a(n),t=+t,1>t||!n||!bi(t))return e;do t%2&&(e+=n),t=_i(t/2),n+=n;while(t);return e}function _u(n,t,e){return n=a(n),e=null==e?0:ji(0>e?0:+e||0,n.length),n.lastIndexOf(t,e)==e}function yu(n,e,r){var o=t.templateSettings;r&&Qe(n,e,r)&&(e=r=O),n=a(n),e=mt(_t({},r||e),o,dt);var u,i,c=mt(_t({},e.imports),o.imports,dt),f=qa(c),l=te(c,f),s=0,p=e.interpolate||Bn,h="__p += '",v=Vu((e.escape||Bn).source+"|"+p.source+"|"+(p===En?Tn:Bn).source+"|"+(e.evaluate||Bn).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Wn+"]")+"\n";n.replace(v,function(t,e,r,o,a,c){return r||(r=o),h+=n.slice(s,c).replace(Un,g),e&&(u=!0,h+="' +\n__e("+e+") +\n'"),a&&(i=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=c+t.length,t}),h+="';\n";var m=e.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(i?h.replace(gn,""):h).replace(dn,"$1").replace(mn,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=Xa(function(){return zu(f,d+"return "+h).apply(O,l)});if(_.source=h,To(_))throw _;return _}function bu(n,t,e){var r=n;return(n=a(n))?(e?Qe(r,t,e):null==t)?n.slice(w(n),x(n)+1):(t+="",n.slice(c(n,t),f(n,t)+1)):n}function wu(n,t,e){var r=n;return n=a(n),n?n.slice((e?Qe(r,t,e):null==t)?w(n):c(n,t+"")):n}function xu(n,t,e){var r=n;return n=a(n),n?(e?Qe(r,t,e):null==t)?n.slice(0,x(n)+1):n.slice(0,f(n,t+"")+1):n}function ju(n,t,e){e&&Qe(n,t,e)&&(t=O);var r=D,o=M;if(null!=t)if(Fo(t)){var u="separator"in t?t.separator:u;r="length"in t?+t.length||0:r,o="omission"in t?a(t.omission):o}else r=+t||0;if(n=a(n),r>=n.length)return n;var i=r-o.length;if(1>i)return o;var c=n.slice(0,i);if(null==u)return c+o;if(Wo(u)){if(n.slice(i).search(u)){var f,l,s=n.slice(0,i);for(u.global||(u=Vu(u.source,(Nn.exec(u)||"")+"g")),u.lastIndex=0;f=u.exec(s);)l=f.index;c=c.slice(0,null==l?i:l)}}else if(n.indexOf(u,i)!=i){var p=c.lastIndexOf(u);p>-1&&(c=c.slice(0,p))}return c+o}function Eu(n){return n=a(n),n&&bn.test(n)?n.replace(_n,j):n}function Ou(n,t,e){return e&&Qe(n,t,e)&&(t=O),n=a(n),n.match(t||qn)||[]}function Cu(n,t,e){return e&&Qe(n,t,e)&&(t=O),m(n)?Au(n):wt(n,t)}function ku(n){return function(){return n}}function Ru(n){return n}function Au(n){return qt(xt(n,!0))}function Pu(n,t){return $t(n,xt(t,!0))}function Iu(n,t,e){if(null==e){var r=Fo(t),o=r?qa(t):O,u=o&&o.length?St(t,o):O;(u?u.length:r)||(u=!1,e=t,t=n,n=this)}u||(u=St(t,qa(t)));var i=!0,a=-1,c=So(n),f=u.length;e===!1?i=!1:Fo(e)&&"chain"in e&&(i=e.chain);for(;++a<f;){var l=u[a],s=t[l];n[l]=s,c&&(n.prototype[l]=function(t){return function(){var e=this.__chain__;if(i||e){var r=n(this.__wrapped__),o=r.__actions__=tt(this.__actions__);return o.push({func:t,args:arguments,thisArg:n}),r.__chain__=e,r}return t.apply(n,lt([this.value()],arguments))}}(s))}return n}function Tu(){return rt._=oi,this}function Nu(){}function Su(n){return nr(n)?zt(n):Kt(n)}function Fu(n){return function(t){return Ft(n,pr(t),t+"")}}function Du(n,t,e){e&&Qe(n,t,e)&&(t=e=O),n=+n||0,e=null==e?1:+e||0,null==t?(t=n,n=0):t=+t||0;for(var r=-1,o=xi(di((t-n)/(e||1)),0),u=$u(o);++r<o;)u[r]=n,n+=e;return u}function Mu(n,t,e){if(n=_i(n),1>n||!bi(n))return[];var r=-1,o=$u(ji(n,Ai));for(t=ie(t,e,1);++r<n;)Ai>r?o[r]=t(r):t(r);return o}function Bu(n){var t=++ei;return a(n)+t}function Uu(n,t){return(+n||0)+(+t||0)}function qu(n,t,e){return e&&Qe(n,t,e)&&(t=O),t=$e(t,e,3),1==t.length?vt(Aa(n)?n:lr(n),t):Qt(n,t)}n=n?ot.defaults(rt.Object(),n,ot.pick(rt,$n)):rt;{var $u=n.Array,Wu=n.Date,Lu=n.Error,zu=n.Function,Ku=n.Math,Ju=n.Number,Hu=n.Object,Vu=n.RegExp,Yu=n.String,Gu=n.TypeError,Xu=$u.prototype,Zu=Hu.prototype,Qu=Yu.prototype,ni=zu.prototype.toString,ti=Zu.hasOwnProperty,ei=0,ri=Zu.toString,oi=rt._,ui=Vu("^"+ni.call(ti).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ii=n.ArrayBuffer,ai=n.clearTimeout,ci=n.parseFloat,fi=Ku.pow,li=Zu.propertyIsEnumerable,si=Ke(n,"Set"),pi=n.setTimeout,hi=Xu.splice,vi=n.Uint8Array,gi=Ke(n,"WeakMap"),di=Ku.ceil,mi=Ke(Hu,"create"),_i=Ku.floor,yi=Ke($u,"isArray"),bi=n.isFinite,wi=Ke(Hu,"keys"),xi=Ku.max,ji=Ku.min,Ei=Ke(Wu,"now"),Oi=n.parseInt,Ci=Ku.random,ki=Ju.NEGATIVE_INFINITY,Ri=Ju.POSITIVE_INFINITY,Ai=4294967295,Pi=Ai-1,Ii=Ai>>>1,Ti=9007199254740991,Ni=gi&&new gi,Si={};t.support={}}t.templateSettings={escape:xn,evaluate:jn,interpolate:En,variable:"",imports:{_:t}};var Fi=function(){function n(){}return function(t){if(Fo(t)){n.prototype=t;var e=new n;n.prototype=O}return e||{}}}(),Di=pe(Tt),Mi=pe(Nt,!0),Bi=he(),Ui=he(!0),qi=Ni?function(n,t){return Ni.set(n,t),n}:Ru,$i=Ni?function(n){return Ni.get(n)}:Nu,Wi=zt("length"),Li=function(){var n=0,t=0;return function(e,r){var o=ga(),u=U-(o-t);if(t=o,u>0){if(++n>=B)return e}else n=0;return qi(e,r)}}(),zi=_o(function(n,t){return m(n)&&Xe(n)?Et(n,Pt(t,!1,!0)):[]}),Ki=xe(),Ji=xe(!0),Hi=_o(function(n){for(var t=n.length,e=t,r=$u(s),o=Le(),i=o==u,a=[];e--;){var c=n[e]=Xe(c=n[e])?c:[];r[e]=i&&c.length>=120?ge(e&&c):null}var f=n[0],l=-1,s=f?f.length:0,p=r[0];n:for(;++l<s;)if(c=f[l],(p?Zn(p,c):o(a,c,0))<0){for(var e=t;--e;){var h=r[e];if((h?Zn(h,c):o(n[e],c,0))<0)continue n}p&&p.push(c),a.push(c)}return a}),Vi=_o(function(n,t){t=Pt(t);var e=yt(n,t);return Jt(n,t.sort(r)),e}),Yi=De(),Gi=De(!0),Xi=_o(function(n){return ne(Pt(n,!1,!0))}),Zi=_o(function(n,t){return Xe(n)?Et(n,t):[]}),Qi=_o(Mr),na=_o(function(n){var t=n.length,e=t>2?n[t-2]:O,r=t>1?n[t-1]:O;return t>2&&"function"==typeof e?t-=2:(e=t>1&&"function"==typeof r?(--t,r):O,r=O),n.length=t,Br(n,e,r)}),ta=_o(function(n){return n=Pt(n),this.thru(function(t){return nt(Aa(t)?t:[sr(t)],n)})}),ea=_o(function(n,t){return yt(n,Pt(t))}),ra=le(function(n,t,e){ti.call(n,e)?++n[e]:n[e]=1}),oa=we(Di),ua=we(Mi,!0),ia=Oe(et,Di),aa=Oe(ut,Mi),ca=le(function(n,t,e){ti.call(n,e)?n[e].push(t):n[e]=[t]}),fa=le(function(n,t,e){n[e]=t}),la=_o(function(n,t,e){var r=-1,o="function"==typeof t,u=nr(t),i=Xe(n)?$u(n.length):[];return Di(n,function(n){var a=o?t:u&&null!=n?n[t]:O;i[++r]=a?a.apply(n,e):Ge(n,t,e)}),i}),sa=le(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]}),pa=Ie(st,Di),ha=Ie(pt,Mi),va=_o(function(n,t){if(null==n)return[];var e=t[2];return e&&Qe(t[0],t[1],e)&&(t.length=1),Zt(n,Pt(t),[])}),ga=Ei||function(){return(new Wu).getTime()},da=_o(function(n,t,e){var r=k;if(e.length){var o=y(e,da.placeholder);r|=T}return Me(n,r,t,e,o)}),ma=_o(function(n,t){t=t.length?Pt(t):Xo(n);for(var e=-1,r=t.length;++e<r;){var o=t[e];n[o]=Me(n[o],k,n)}return n}),_a=_o(function(n,t,e){var r=k|R;if(e.length){var o=y(e,_a.placeholder);r|=T}return Me(t,r,n,e,o)}),ya=_e(P),ba=_e(I),wa=_o(function(n,t){return jt(n,1,t)}),xa=_o(function(n,t,e){return jt(n,t,e)}),ja=Ee(),Ea=Ee(!0),Oa=_o(function(n,t){if(t=Pt(t),"function"!=typeof n||!it(t,i))throw new Gu(L);var e=t.length;return _o(function(r){for(var o=ji(r.length,e);o--;)r[o]=t[o](r[o]);return n.apply(this,r)})}),Ca=Pe(T),ka=Pe(N),Ra=_o(function(n,t){return Me(n,F,O,O,O,Pt(t))}),Aa=yi||function(n){return m(n)&&er(n.length)&&ri.call(n)==J},Pa=se(Wt),Ia=se(function(n,t,e){return e?mt(n,t,e):_t(n,t)}),Ta=ye(Ia,gt),Na=ye(Pa,ur),Sa=je(Tt),Fa=je(Nt),Da=Ce(Bi),Ma=Ce(Ui),Ba=ke(Tt),Ua=ke(Nt),qa=wi?function(n){var t=null==n?O:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Xe(n)?fr(n):Fo(n)?wi(n):[]}:fr,$a=Re(!0),Wa=Re(),La=_o(function(n,t){if(null==n)return{};if("function"!=typeof t[0]){var t=ft(Pt(t),Yu);return ir(n,Et(tu(n),t))}var e=ie(t[0],t[1],3);return ar(n,function(n,t,r){return!e(n,t,r)})}),za=_o(function(n,t){return null==n?{}:"function"==typeof t[0]?ar(n,ie(t[0],t[1],3)):ir(n,Pt(t))}),Ka=de(function(n,t,e){return t=t.toLowerCase(),n+(e?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ja=de(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Ha=Ae(),Va=Ae(!0),Ya=de(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()}),Ga=de(function(n,t,e){return n+(e?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Xa=_o(function(n,t){try{return n.apply(O,t)}catch(e){return To(e)?e:new Lu(e)}}),Za=_o(function(n,t){return function(e){return Ge(e,n,t)}}),Qa=_o(function(n,t){return function(e){return Ge(n,e,t)}}),nc=Fe("ceil"),tc=Fe("floor"),ec=be(Eo,ki),rc=be(Jo,Ri),oc=Fe("round");return t.prototype=e.prototype,_.prototype=Fi(e.prototype),_.prototype.constructor=_,X.prototype=Fi(e.prototype),X.prototype.constructor=X,Jn.prototype["delete"]=Hn,Jn.prototype.get=Vn,Jn.prototype.has=Yn,Jn.prototype.set=Gn,Xn.prototype.push=Qn,vo.Cache=Jn,t.after=lo,t.ary=so,t.assign=Ia,t.at=ea,t.before=po,t.bind=da,t.bindAll=ma,t.bindKey=_a,t.callback=Cu,t.chain=$r,t.chunk=vr,t.compact=gr,t.constant=ku,t.countBy=ra,t.create=Go,t.curry=ya,t.curryRight=ba,t.debounce=ho,t.defaults=Ta,t.defaultsDeep=Na,t.defer=wa,t.delay=xa,t.difference=zi,t.drop=dr,t.dropRight=mr,t.dropRightWhile=_r,t.dropWhile=yr,t.fill=br,t.filter=Xr,t.flatten=xr,t.flattenDeep=jr,t.flow=ja,t.flowRight=Ea,t.forEach=ia,t.forEachRight=aa,t.forIn=Da,t.forInRight=Ma,t.forOwn=Ba,t.forOwnRight=Ua,t.functions=Xo,t.groupBy=ca,t.indexBy=fa,t.initial=Or,t.intersection=Hi,t.invert=nu,t.invoke=la,t.keys=qa,t.keysIn=tu,t.map=no,t.mapKeys=$a,t.mapValues=Wa,t.matches=Au,t.matchesProperty=Pu,t.memoize=vo,t.merge=Pa,t.method=Za,t.methodOf=Qa,t.mixin=Iu,t.modArgs=Oa,t.negate=go,t.omit=La,t.once=mo,t.pairs=eu,t.partial=Ca,t.partialRight=ka,t.partition=sa,t.pick=za,t.pluck=to,t.property=Su,t.propertyOf=Fu,t.pull=Rr,t.pullAt=Vi,t.range=Du,t.rearg=Ra,t.reject=eo,t.remove=Ar,t.rest=Pr,t.restParam=_o,t.set=ou,t.shuffle=oo,t.slice=Ir,t.sortBy=ao,t.sortByAll=va,t.sortByOrder=co,t.spread=yo,t.take=Tr,t.takeRight=Nr,t.takeRightWhile=Sr,t.takeWhile=Fr,t.tap=Wr,t.throttle=bo,t.thru=Lr,t.times=Mu,t.toArray=Vo,t.toPlainObject=Yo,t.transform=uu,t.union=Xi,t.uniq=Dr,t.unzip=Mr,t.unzipWith=Br,t.values=iu,t.valuesIn=au,t.where=fo,t.without=Zi,t.wrap=wo,t.xor=Ur,t.zip=Qi,t.zipObject=qr,t.zipWith=na,t.backflow=Ea,t.collect=no,t.compose=Ea,t.each=ia,t.eachRight=aa,t.extend=Ia,t.iteratee=Cu,t.methods=Xo,t.object=qr,t.select=Xr,t.tail=Pr,t.unique=Dr,Iu(t,t),t.add=Uu,t.attempt=Xa,t.camelCase=Ka,t.capitalize=lu,t.ceil=nc,t.clone=xo,t.cloneDeep=jo,t.deburr=su,t.endsWith=pu,t.escape=hu,t.escapeRegExp=vu,t.every=Gr,t.find=oa,t.findIndex=Ki,t.findKey=Sa,t.findLast=ua,t.findLastIndex=Ji,t.findLastKey=Fa,t.findWhere=Zr,t.first=wr,t.floor=tc,t.get=Zo,t.gt=Eo,t.gte=Oo,t.has=Qo,t.identity=Ru,t.includes=Qr,t.indexOf=Er,t.inRange=cu,t.isArguments=Co,t.isArray=Aa,t.isBoolean=ko,t.isDate=Ro,t.isElement=Ao,t.isEmpty=Po,t.isEqual=Io,t.isError=To,t.isFinite=No,t.isFunction=So,t.isMatch=Do,t.isNaN=Mo,t.isNative=Bo,t.isNull=Uo,t.isNumber=qo,t.isObject=Fo,t.isPlainObject=$o,t.isRegExp=Wo,t.isString=Lo,t.isTypedArray=zo,t.isUndefined=Ko,t.kebabCase=Ja,t.last=Cr,t.lastIndexOf=kr,t.lt=Jo,t.lte=Ho,t.max=ec,t.min=rc,t.noConflict=Tu,t.noop=Nu,t.now=ga,t.pad=gu,t.padLeft=Ha,t.padRight=Va,t.parseInt=du,t.random=fu,t.reduce=pa,t.reduceRight=ha,t.repeat=mu,t.result=ru,t.round=oc,t.runInContext=E,t.size=uo,t.snakeCase=Ya,t.some=io,t.sortedIndex=Yi,t.sortedLastIndex=Gi,t.startCase=Ga,t.startsWith=_u,t.sum=qu,t.template=yu,t.trim=bu,t.trimLeft=wu,t.trimRight=xu,t.trunc=ju,t.unescape=Eu,t.uniqueId=Bu,t.words=Ou,t.all=Gr,t.any=io,t.contains=Qr,t.eq=Io,t.detect=oa,t.foldl=pa,t.foldr=ha,t.head=wr,t.include=Qr,t.inject=pa,Iu(t,function(){var n={};return Tt(t,function(e,r){t.prototype[r]||(n[r]=e)}),n}(),!1),t.sample=ro,t.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return ro(t,n)}):ro(this.value())},t.VERSION=C,et(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){t[n].placeholder=t}),et(["drop","take"],function(n,t){X.prototype[n]=function(e){var r=this.__filtered__;if(r&&!t)return new X(this);e=null==e?1:xi(_i(e)||0,0);var o=this.clone();return r?o.__takeCount__=ji(o.__takeCount__,e):o.__views__.push({size:e,type:n+(o.__dir__<0?"Right":"")}),o},X.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),et(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e!=W;X.prototype[n]=function(n,t){var o=this.clone();return o.__iteratees__.push({iteratee:$e(n,t,1),type:e}),o.__filtered__=o.__filtered__||r,o}}),et(["first","last"],function(n,t){var e="take"+(t?"Right":"");X.prototype[n]=function(){return this[e](1).value()[0]}}),et(["initial","rest"],function(n,t){var e="drop"+(t?"":"Right");X.prototype[n]=function(){return this.__filtered__?new X(this):this[e](1)}}),et(["pluck","where"],function(n,t){var e=t?"filter":"map",r=t?qt:Su;X.prototype[n]=function(n){return this[e](r(n))}}),X.prototype.compact=function(){return this.filter(Ru)},X.prototype.reject=function(n,t){return n=$e(n,t,1),this.filter(function(t){return!n(t)})},X.prototype.slice=function(n,t){n=null==n?0:+n||0;var e=this;return e.__filtered__&&(n>0||0>t)?new X(e):(0>n?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==O&&(t=+t||0,e=0>t?e.dropRight(-t):e.take(t-n)),e)},X.prototype.takeRightWhile=function(n,t){return this.reverse().takeWhile(n,t).reverse()},X.prototype.toArray=function(){return this.take(Ri)},Tt(X.prototype,function(n,e){var r=/^(?:filter|map|reject)|While$/.test(e),o=/^(?:first|last)$/.test(e),u=t[o?"take"+("last"==e?"Right":""):e];u&&(t.prototype[e]=function(){var t=o?[1]:arguments,e=this.__chain__,i=this.__wrapped__,a=!!this.__actions__.length,c=i instanceof X,f=t[0],l=c||Aa(i);l&&r&&"function"==typeof f&&1!=f.length&&(c=l=!1);var s=function(n){return o&&e?u(n,1)[0]:u.apply(O,lt([n],t))},p={func:Lr,args:[s],thisArg:O},h=c&&!a;if(o&&!e)return h?(i=i.clone(),i.__actions__.push(p),n.call(i)):u.call(O,this.value())[0];if(!o&&l){i=h?i:new X(this);var v=n.apply(i,t);return v.__actions__.push(p),new _(v,e)}return this.thru(s)})}),et(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(n){var e=(/^(?:replace|split)$/.test(n)?Qu:Xu)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",o=/^(?:join|pop|replace|shift)$/.test(n);t.prototype[n]=function(){var n=arguments;return o&&!this.__chain__?e.apply(this.value(),n):this[r](function(t){return e.apply(t,n)})}}),Tt(X.prototype,function(n,e){var r=t[e];if(r){var o=r.name,u=Si[o]||(Si[o]=[]);u.push({name:e,func:r})}}),Si[Te(O,R).name]=[{name:"wrapper",func:O}],X.prototype.clone=tn,X.prototype.reverse=rn,X.prototype.value=Kn,t.prototype.chain=zr,t.prototype.commit=Kr,t.prototype.concat=ta,t.prototype.plant=Jr,t.prototype.reverse=Hr,t.prototype.toString=Vr,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Yr,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var O,C="3.10.1",k=1,R=2,A=4,P=8,I=16,T=32,N=64,S=128,F=256,D=30,M="...",B=150,U=16,q=200,$=1,W=2,L="Expected a function",z="__lodash_placeholder__",K="[object Arguments]",J="[object Array]",H="[object Boolean]",V="[object Date]",Y="[object Error]",G="[object Function]",X="[object Map]",Z="[object Number]",Q="[object Object]",nn="[object RegExp]",tn="[object Set]",en="[object String]",rn="[object WeakMap]",on="[object ArrayBuffer]",un="[object Float32Array]",an="[object Float64Array]",cn="[object Int8Array]",fn="[object Int16Array]",ln="[object Int32Array]",sn="[object Uint8Array]",pn="[object Uint8ClampedArray]",hn="[object Uint16Array]",vn="[object Uint32Array]",gn=/\b__p \+= '';/g,dn=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39|#96);/g,yn=/[&<>"'`]/g,bn=RegExp(_n.source),wn=RegExp(yn.source),xn=/<%-([\s\S]+?)%>/g,jn=/<%([\s\S]+?)%>/g,En=/<%=([\s\S]+?)%>/g,On=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Cn=/^\w*$/,kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Rn=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,An=RegExp(Rn.source),Pn=/[\u0300-\u036f\ufe20-\ufe23]/g,In=/\\(\\)?/g,Tn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nn=/\w*$/,Sn=/^0[xX]/,Fn=/^\[object .+?Constructor\]$/,Dn=/^\d+$/,Mn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Bn=/($^)/,Un=/['\n\r\u2028\u2029\\]/g,qn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),$n=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Wn=-1,Ln={};Ln[un]=Ln[an]=Ln[cn]=Ln[fn]=Ln[ln]=Ln[sn]=Ln[pn]=Ln[hn]=Ln[vn]=!0,Ln[K]=Ln[J]=Ln[on]=Ln[H]=Ln[V]=Ln[Y]=Ln[G]=Ln[X]=Ln[Z]=Ln[Q]=Ln[nn]=Ln[tn]=Ln[en]=Ln[rn]=!1;var zn={};zn[K]=zn[J]=zn[on]=zn[H]=zn[V]=zn[un]=zn[an]=zn[cn]=zn[fn]=zn[ln]=zn[Z]=zn[Q]=zn[nn]=zn[en]=zn[sn]=zn[pn]=zn[hn]=zn[vn]=!0,zn[Y]=zn[G]=zn[X]=zn[tn]=zn[rn]=!1;var Kn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Jn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Hn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Vn={"function":!0,object:!0},Yn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Gn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xn=Vn[typeof e]&&e&&!e.nodeType&&e,Zn=Vn[typeof t]&&t&&!t.nodeType&&t,Qn=Xn&&Zn&&"object"==typeof n&&n&&n.Object&&n,nt=Vn[typeof self]&&self&&self.Object&&self,tt=Vn[typeof window]&&window&&window.Object&&window,et=Zn&&Zn.exports===Xn&&Xn,rt=Qn||tt!==(this&&this.window)&&tt||nt||this,ot=E();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(rt._=ot,define(function(){return ot})):Xn&&Zn?et?(Zn.exports=ot)._=ot:Xn._=ot:rt._=ot}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(n,t,e){"use strict";function r(n){if(null===n||void 0===n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}var o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(n,t){for(var e,i,a=r(n),c=1;c<arguments.length;c++){e=Object(arguments[c]);for(var f in e)o.call(e,f)&&(a[f]=e[f]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(e);for(var l=0;l<i.length;l++)u.call(e,i[l])&&(a[i[l]]=e[i[l]])}}return a}},{}],3:[function(n,t,e){"use strict";function r(n){console.log(n)}function o(n){var t={};return n.forEach(function(n){t[n.name]=n}),t}function u(n){i.push(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.log=r,e.makeSkuMap=o,e.resize=u;var i=[],a=null;window.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(function(){i.forEach(function(n){n()})},200)},!1)},{}],4:[function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(n,t,e){for(var r=!0;r;){var o=n,u=t,i=e;a=f=c=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,u);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(i)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;n=f,t=u,e=i,r=!0}},a=function(n){function t(n){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);var e="jiketao";!function(){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)}()}return o(t,n),u(t,[{key:"render",value:function(){return React.createElement("div",{className:"disqus"},React.createElement("div",{id:"disqus_thread"}),React.createElement("noscript",null,"Please enable JavaScript to view the ",React.createElement("a",{href:"https://disqus.com/?ref_noscript",rel:"nofollow"},"comments powered by Disqus.")))}}]),t}(React.Component);e["default"]=a,t.exports=e["default"]},{}],5:[function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(n,t,e){for(var r=!0;r;){var o=n,u=t,i=e;a=f=c=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,u);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(i)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;n=f,t=u,e=i,r=!0}},a=function(n){function t(n){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return o(t,n),u(t,[{key:"getContent",value:function(){return{__html:this.props.content}}},{key:"render",value:function(){return React.createElement("div",{className:"markdown-content",dangerouslySetInnerHTML:this.getContent()})}}]),t}(React.Component);e["default"]=a,t.exports=e["default"]},{}],6:[function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(n,t,e){for(var r=!0;r;){var o=n,u=t,i=e;a=f=c=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,u);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(i)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;n=f,t=u,e=i,r=!0}},a=function(n){function t(n){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return o(t,n),u(t,[{key:"getItems",value:function(){var n=this;return 0!==this.props.menus.length?React.createElement("ul",{className:"menus"},this.props.menus.map(function(t,e){return React.createElement("li",{className:"menu-item",key:e},React.createElement("a",{className:e===n.props.activeIndex?"active":"",href:t.url},t.name))})):React.createElement("span",null)}},{key:"render",value:function(){return React.createElement("div",{className:"menus-wrapper"},React.createElement("h1",null,React.createElement("a",{href:"/"},"极客淘")))}}]),t}(React.Component);e["default"]=a,t.exports=e["default"]},{}],7:[function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(n,t,e){for(var r=!0;r;){var o=n,u=t,i=e;a=f=c=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,u);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(i)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;n=f,t=u,e=i,r=!0}},a=function(n){function t(){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return o(t,n),u(t,[{key:"render",value:function(){var n=this,t=function(){return{__html:n.props.product.content.extended}};return React.createElement("div",{className:"post",dangerouslySetInnerHTML:t()})}}]),t}(React.Component);e["default"]=a,t.exports=e["default"]},{}],8:[function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(n,t,e){for(var r=!0;r;){var o=n,u=t,i=e;a=f=c=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,u);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(i)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;n=f,t=u,e=i,r=!0}},a=function(n){function t(){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return o(t,n),u(t,[{key:"render",value:function(){var n="嗖～！";return React.createElement("div",{className:"search"},React.createElement("input",{type:"text",placeholder:this.props.placeholder||n}),React.createElement("span",{className:"search-icon center"},React.createElement("i",{className:"fa fa-search"})))}}]),t}(React.Component);e["default"]=a,t.exports=e["default"]},{}],9:[function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(){for(var n=0,t=w["default"][0];n++<20;){var e=h["default"].extend({},t);e._id=n,e.content=e.content.repeat(n),w["default"].push(e)}}var u=(n("./common/util"),n("./components/menu")),i=r(u),a=n("./components/post"),c=(r(a),n("./components/search")),f=r(c),l=n("./components/markdown-content"),s=r(l),p=n("lodash"),h=r(p),v=n("./components/disqus"),g=r(v),d=n("../../test/fixtures/products"),m=r(d),_=n("../../test/fixtures/menus.json"),y=r(_),b=n("../../test/fixtures/comments.json"),w=r(b);o();var x=-1,j=m["default"](20)[0];React.render(React.createElement("div",null,React.createElement("div",{className:"nav-bar"},React.createElement(i["default"],{menus:y["default"],activeIndex:x}),React.createElement("div",{className:"align-content"},React.createElement(f["default"],null))),React.createElement("div",{className:"content"},React.createElement("div",{className:"content-unit"},React.createElement("div",{className:"product-detail"},React.createElement("h1",{className:"heading"},"分金额可打开短裤"),React.createElement(s["default"],{content:j.content.extended}))),React.createElement("div",{className:"content-unit"},React.createElement(g["default"],null)))),document.getElementById("wrapper"))},{"../../test/fixtures/comments.json":10,"../../test/fixtures/menus.json":11,"../../test/fixtures/products":12,"./common/util":3,"./components/disqus":4,"./components/markdown-content":5,"./components/menu":6,"./components/post":7,"./components/search":8,lodash:1}],10:[function(n,t,e){t.exports=[{_id:0,date:"2015-07-07",content:"只有这么长的评论才是真爱啊！",user:{_id:0,name:"杰瑞",avatar:"assets/jerry.gif"}}]},{}],11:[function(n,t,e){t.exports=[{name:"所有",url:"/"},{name:"电脑",url:"/"},{name:"键盘",url:"/"},{name:"办公椅",url:"/"},{name:"软件",url:"/"},{name:"背包",url:"/"},{name:"鸡鸡",url:"/"}]},{}],12:[function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("object-assign"),u=r(o),i=n("./util"),a='<p>可以把上面的“新文章”看成是一个事件，“订阅文章”则是“<strong>监听</strong>”这个事件，“发布新文章”则是“<strong>触发</strong>”这个事件，“取消订阅文章”就是“<strong>取消监听</strong>”“新文章”这个事件。假如“<strong>监听</strong>”用<code>on</code>来表示，“<strong>触发</strong>”用<code>emit</code>来表示，“<strong>取消监听</strong>”用<code>off</code>来表示，那么上面的代码可以重新表示为：</p>\n\n<pre><code>var blog = new Blog; // 假设已有一个Blog类实现on、emit、off方法\n\nvar readerFunc1 = function(blogContent) {\n    console.log(blogContent + " will be shown here.");\n}\nvar readerFunc2 = function(blogContent) {\n    console.log(blogContent + " will be shown here, too.");\n}\n\nblog.on("new post", readerFunc1); // 读者1监听事件\nblog.on("new post", readerFunc2); // 读者2监听事件\n\nblog.emit("new post", "This is blog content."); // 发布博客内容，触发事件，上面的两个读者的函数都会被调用\nblog.off("new post", readerFunc1); // 读者1取消监听事件\nblog.emit("new post", "This is another blog content."); // readerFunc1函数不再调用，readerFunc2继续调用\n</code></pre>\n\n<p>这就是前端中观察者模式的一种具体的表现，使用<code>on</code>来监听特定的事件，<code>emit</code>触发特定的事件，<code>off</code>取消监听特定的事件。再举一个场景“小猫听到小狗叫就会跑”：</p>\n\n<pre><code>var dog = new Dog;\nvar cat = new Cat;\n\ndog.on("park", function() {\n    cat.run();\n});\n\ndog.emit("park");\n</code></pre>\n\n<p>巧妙利用观察者模式可以让前端应用开发耦合性变得更加低，开发效率更高。可能说“变得更有趣”会显得有点不专业，但确实会变得有趣。</p>\n\n<h3>1.2 EventEmitter2</h3>\n\n<p>上面可能比较疑惑的一个点就是，<code>on</code>、<code>emit</code>、<code>off</code>函数该怎么实现？</p>\n\n<p>如果要自己实现一遍也不很复杂：每个“事件名”对应的就是一个函数数组，每次<code>on</code>某个事件的时候就是把函数压到对应的函数数组当中；每次<code>emit</code>的时候相当于把事件名对应的函数数组遍历一遍进行调用；每次<code>off</code>的时候把目标函数从数组当中剔除。<a href="https://github.com/livoras/stereojs/blob/master/src/events.js">这里</a>有个简单的实现，有兴趣的可以了解一下。</p>\n\n<p>重复发明轮子的事情就不要做了，其实现成有很多JavaScript的事件库，直接拿来用就好了。比较流行、常用的就是<a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a>这个事件库，本文主要使用这个库来展开对观察者模式在前端应用中的讨论。但实际上，<strong>你可以使用任何自己构建的或者第三方的事件库来实践本文所提及的应用方式</strong>。</p>\n\n<h2>2. EventEmitter2 简介</h2>\n\n<ul>\n  <li>FUCK</li>\n  <li>FUCK2</li>\n  <li>FUCKx3</li>\n  <li>FUCKx4</li>\n  <li>FUCKx6</li>\n</ul>\n\n<p>EventEmitter本来是Node.js中自带的<code>events</code>模块中的一个类，可见<a href="https://nodejs.org/api/events.html">Node.js文档</a>。可供开发者自定义事件，后来有人把它重新实现了一遍，优化了实现方式，提高了性能，新增了一些方便的API，这就是<a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a>。当然，后来陆续出现了<a href="https://www.npmjs.com/package/eventemitter3">EventEmitter3</a>，<a href="https://www.npmjs.com/package/eventemitter4">EventEmitter4</a>。可见没有女朋友的程序员也是比较无聊地只好重复发明和优化轮子。</p>\n\n<p>EventEmitter2可以供浏览器、或者Node.js使用。安装过程和API就不在这里累述，参照官方文档即可。使用Browserify或者Node.js可以非常方便地引用EvenEmitter2，只需要require即可。示例：</p>\n\n<pre><code>var EventEmitter2 = require(\'eventemitter2\').EventEmitter2;\nvar emitter = new EventEmitter2;\n\nemitter.on("Hello World", function() {\n    console.log("Somebody said: Hello world.");\n});\n\nemitter.emit("Hello World"); // 输出 Somebody said: Hello world.\n</code></pre>\n\n<h3>2.1 EventEmitter2作为父类给给子类提供事件机制</h3>\n\n<p>但在实际应用当中，很少单纯EventEmitter直接实例化来使用。比较多的应用场景是，为某些已有的类添加事件的功能。如上面的第一章中的“小猫听到小狗叫就会跑”的例子，<code>Cat</code>和<code>Dog</code>类本身就有自己的类属性、方法，需要的是为已有的Cat、Dog添加事件功能。这里就需要让EventEmitter作为其他类的父类进行继承。</p>\n\n<pre><code>var EventEmitter2 = require(\'eventemitter2\').EventEmitter2;\n\n// Cat子类继承父类构造字\nfunction Cat() {\n    EventEmitter2.apply(this);\n    // Cat 构造子，属性初始化等\n}\n\n// 原型继承\nCat.prototype = Object.create(EventEmitter2.prototype);\nCat.prototype.constructor = Cat; // =&gt; 这两行看不懂的可以先复习一下JS\n\n// Cat类方法\nCat.prototype.run = function () {\n    console.log("This cat is running...");\n}\n\nvar cat = new Cat;\nconsole.assert(typeof cat.on == "function"); // =&gt; true\nconsole.assert(typeof cat.run == "function"); // =&gt; true\n</code></pre>\n\n<p>很棒是吧，这样就可以即有EventEmitter2的原型方法，也可以定义Cat自身的方法。</p>\n\n<p>这一点都不棒！每次定义一个类都要重新写一堆啰嗦的东西，下面做个继承的改进：构建一个函数，只需要传入已经定义好的类就可以在不影响类原有功能的情况下，让其拥有EventEmitter2的功能：</p>\n\n<pre><code>// Function `eventify`: Making a class get power of EventEmitter2!\n// @copyright: Livoras\n// @date: 2015/3/27\n// All rights reserve!\n\nfunction eventify(klass) {\n    if (klass.prototype instanceof EventEmitter2) {\n        console.warn("Class has been eventified!");\n        return klass;\n    }\n\n    function Tempt() {\n        klass.apply(this, arguments);\n        EventEmitter2.call(this);\n    };\n    function Tempt2() {};\n\n    Tempt2.prototype = Object.create(EventEmitter2.prototype)\n    Tempt2.prototype.constructor = EventEmitter2;\n\n    var temptProp = Object.create(Tempt2.prototype);\n    var klassProp = klass.prototype;\n\n    for (var attr in klassProp) {\n        temptProp[attr] = klassProp[attr];\n    }\n\n    Tempt.prototype = temptProp;\n    Tempt.prototype.constructor = klass;\n\n    return Tempt;\n}\n</code></pre>\n\n<p>上面的代码可以的实现原理在这里并不重要的，有兴趣的可以看下一篇博客，讨论<code>eventify</code>的实现原理。在这里只需要知道，有了eventify就可以很方便的给类添加EventEmitter2的功能，使用方法如下：</p>\n\n<pre><code>// Dog类的构造函数和原型方法定义\nfunction Dog(name) {\n  this.name = name;\n}\n\nDog.prototype.park = function() {\n  console.log(this.name + " parking....");\n}\n\n// 使Dog具有EventEmitter2功能\nDog = eventify(Dog);\nvar dog = new Dog("Jerry");\n\ndog.on("somebody is coming", function() {\n    dog.park();\n})\n\ndog.emit("somebody is coming") // 输出 Jerry is parking....\n</code></pre>\n\n<p>如上面的代码，现在没有必要为Dog类重新书写类继承代码，只需要按正常的方式定义好Dog类，然后传入eventify函数即可使Dog获取EventEmitter2的功能。本文接下来的讨论会持续使用<code>eventify</code>函数。</p>\n\n<p><strong>注意</strong>：如果你正在使用CoffeeScript，直接使用CoffeeScript自带的extends进行类继承即可，无需上面复杂的代码：</p>\n\n<pre><code>class Dog extends EventEmitter2\n    constructor: -&gt;\n        super.apply @, arguments\n    park: -&gt;\n        // ...\n</code></pre>\n\n<h2>3. EventEmitter2 在组件化的前端架构中的应用</h2>\n\n<h3>3.1 组件化的前端架构</h3>\n\n<p>当一个前端应用足够复杂的时候，往往需要对应用进行“组件化”。所谓组件化，就是把一个大的应用拆分成多个小的应用。每个“应用”具有自己独特的结构和内容、样式和业务逻辑，这些小的应用称为“组件”（Component）。组件的复用性一般很强，是DRY原则的典范，多个组件的嵌套、组合，构建成了一个完成而复杂的应用。</p>\n\n<p>举我在《<a href="http://livoras.com/post/22">一种SPA（单页面应用）架构</a>》举过的例子，博客的评论功能组件：</p>\n\n<p><img src="https://cloud.githubusercontent.com/assets/6436132/3597178/7cc6cd9c-0cce-11e4-8d7e-53f9e113d4c2.jpg" alt="comments-replies-poputbox"></p>\n\n<p>这个评论组件的功能大概如此：<strong>可显示多条评论（comment）；每条评论多条有自己的回复（reply）；评论或者回复都会显示有用户头像，鼠标放到用户头像上会显示该用户的信息（类似微博的功能）</strong>。</p>\n\n<p>这里可以把这个功能分好几个组件：</p>\n\n<ol>\n<li>整体评论功能作为一个组件：commentsBox</li>\n<li>commentsBox有子组件（child component）comment负责显示用户的评论</li>\n<li>每个comment组件有子组件replay负责显示用户对评论的回复</li>\n<li>commentsBox有子组件user-info-card负责显示用户的信息</li>\n</ol>\n\n\n<p>组件这样的关系可以用树的结构来表示：</p>\n\n<p><img class="mid" src="https://raw.githubusercontent.com/livoras/blog-images/master/events/1.png"></p>\n\n<p>这里要注意的是组件之间的关系一般有两种：嵌套和组合。嵌套，如，每个commentBox有comment和user-info-card，comment和user-info-card是嵌套在commentBox当中的，所以这两个组件和commentBox之间都是嵌套的关系；组合，comment和user-info-card都是作为commentBox的子组件存在，他们两个互为兄弟，是组合的关系。处理组件之间的嵌套和组合关系是架构层面需要解决的最重要的问题之一，不在本文讨论范围内，故不累述。但接下来我们讨论的“组件之间以事件的形式进行消息传递”和这些组件之间的关系密切相关。</p>\n\n<p>当开始按照上面的设计进行组件化的时候，我们首先要做的是为每个组件构建一个超类，所有的组件都应该继承这个超类：</p>\n\n<p>component.js:</p>\n\n<pre><code>eventify = require("./eventify.js");\n\n// Component构造函数\nfunction Component(parent) {\n    this.$el = $("...")\n    this.parent = parent;\n}\n\n// Component原型方法\nComponent.prototype.init = function () {/* ... */};\n\nmodule.exports = eventify(Component);\n</code></pre>\n\n<p>这里为了方便起见，Component基本什么内容都没有，几乎只是一个“空”的类，而它通过eventify函数获得了“超能力”，所以继承Component的类同样具有事件的功能。</p>\n\n<p>注意Component构造函数，每个Component在示例化的时候应该传入一个它所属的<strong>父组件</strong>的实例<code>parent</code>，接下来会看到，组件之间的消息通信可以通过这个实例来完成。而<code>$el</code>可以看作是该组件所负责的HTML元素。</p>\n\n<h3>3.2 父子、兄弟组件之间的消息传递</h3>\n\n<p>现在把注意力放在commentsBox、comment、user-info-card三个组件上，暂且忽略reply。</p>\n\n<p>目前要实现的功能是：鼠标放到comment组件的用户头像上，就会显示用户信息。要把这个功能完成大概是这么一个事件流程：comment组件监听用户鼠标放在头像上的交互事件，然后通过<code>this.parent</code>向父组件（commentsBox）传递该事件（<code>this.parent</code>就是commentsBox），commentsBox获取到该事件以后触发一个事件给user-info-card，user-info-card可以通过<code>this.parent</code>监听到该事件，显示用户信息。</p>\n\n<pre><code>// comment-component.js\n// 从Component类中继承获得Comment类\n// ...\n\n// 原型方法\nComment.prototype.init = function () {\n    var that = this;\n    this.$el.find("div.avatar").on("mouseover", function () {\n        // 这里的that.parent相当于父组件CommentsBox，在Comment组件被示例化的时候传入\n        that.parent.emit("comment:user-mouse-on-avatar", this.userId);\n    })\n}\n</code></pre>\n\n<p>]上述代码为当用户把鼠标放到用户头像的时候触发一个事件<code>comment:user-mouse-on-avatar</code>，这里需要注意的是，通过<code>组件名:事件名</code>给这样的事件命名方式可以区分事件的来源组件或目标组件，是一种比较好的编程习惯。</p>\n',c={
_id:0,title:"Chair for fucking",details:{pictures:["assets/chair.jpg","assets/arduino.jpg","assets/dji.jpg","assets/pig.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},f={_id:0,title:"Arduino",details:{pictures:["assets/arduino.jpg","assets/chair.jpg","assets/dji.jpg","assets/pig.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},l={_id:0,title:"DJI",details:{pictures:["assets/dji.jpg","assets/arduino.jpg","assets/chair.jpg","assets/pig.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},s={_id:0,title:"DJI",details:{pictures:["assets/pig.jpg","assets/arduino.jpg","assets/chair.jpg","assets/dji.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},p=[c,f,l,s];e["default"]=function(n){var t=[];n=n||20*Math.random();for(var e=0,r=n;r>e;e++){var o=parseInt(p.length*Math.random()),c=u["default"]({},p[o]);c.title=c.title+"_"+e,c._id=e,c.content.brief=i.randomContent(),c.title=i.randomWord(),c.details.upvote=Math.floor(2e5*Math.random()),c.content.extended=a,c.details.ext={"闭合方式":"套脚","风格":"百搭,时尚休","季节":"春季","款式":"单","流行元素":"纯色,金属装饰","皮质特征":"磨砂","色系":"棕色","适用场合":"日常携带,约会,日常休","销售季":"15年春季","鞋底材质":"橡胶","鞋跟形状":"平跟","头":"圆","性别":"男子","制作工艺":"胶贴皮鞋 "},c.posts=[{_id:0,title:"习近平主持政治局会议 通过繁荣文艺意见"},{_id:1,title:"中越边境雷区四伏:有村庄平均每户少一条腿"},{_id:0,title:"天津爆炸8名失联者被确认无生还可能"},{_id:1,title:"央视回应节目中盗播网友作品:编辑网购付费购得"}],t.push(c)}return t},t.exports=e["default"]},{"./util":13,"object-assign":2}],13:[function(n,t,e){"use strict";function r(n){n=n||Math.floor(2+25*Math.random());for(var t=o(),e=0;n>e;e++)t=t+" "+o();return t}function o(){for(var n="",t="abcdefghijklmnopqrstuvwxyz",e=Math.floor(3+10*Math.random()),r=0;e>r;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={randomWord:o,randomContent:r},t.exports=e["default"]},{}]},{},[9]);