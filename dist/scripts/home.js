!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var n,a,s=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var u in n)o.call(n,u)&&(s[u]=n[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var l=0;l<a.length;l++)i.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},{}],2:[function(t,e,n){function r(t,e){function n(){t.Request.apply(this,arguments)}n.prototype=Object.create(t.Request.prototype),n.prototype.end=function(n){var r=t.Request.prototype.end,o=this;return new e(function(t,e){r.call(o,function(r,o){n&&n(r,o),r?e(r):t(o)})})},n.prototype.then=function(n,r){var o=t.Request.prototype.end,i=this;return new e(function(t,e){o.call(i,function(n,r){n?e(n):t(r)})}).then(n,r)};var r=function(t,e){return new n(t,e)};return r.options=function(t){return r("OPTIONS",t)},r.head=function(t,e){var n=r("HEAD",t);return e&&n.send(e),n},r.get=function(t,e){var n=r("GET",t);return e&&n.query(e),n},r.post=function(t,e){var n=r("POST",t);return e&&n.send(e),n},r.put=function(t,e){var n=r("PUT",t);return e&&n.send(e),n},r.patch=function(t,e){var n=r("PATCH",t);return e&&n.send(e),n},r.del=function(t){return r("DELETE",t)},r}e.exports=r},{}],3:[function(t,e,n){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){return t===Object(t)}function a(t){if(!i(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function s(t){for(var e,n,r={},o=t.split("&"),i=0,a=o.length;a>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function c(t){var e,n,r,o,i=t.split(/\r?\n/),a={};i.pop();for(var s=0,c=i.length;c>s;++s)n=i[s],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=y(n.slice(e+1)),a[r]=o;return a}function u(t){return t.split(/ *; */).shift()}function l(t){return m(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function f(t,e){var n=this;h.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new p(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,n.callback(o,e)})}function d(t,e){return"function"==typeof e?new f("GET",t).end(e):1==arguments.length?new f("GET",t):new f(t,e)}var h=t("emitter"),m=t("reduce"),v="undefined"==typeof window?this||self:window;d.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var y="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=a,d.parseString=s,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=u(e);var n=l(e);for(var r in n)this[r]=n[r]},p.prototype.parseBody=function(t){var e=d.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},p.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},d.Response=p,h(f.prototype),f.prototype.use=function(t){return t(this),this},f.prototype.timeout=function(t){return this._timeout=t,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},f.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},f.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},f.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},f.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},f.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},f.prototype.query=function(t){return"string"!=typeof t&&(t=a(t)),t&&this._query.push(t),this},f.prototype.field=function(t,e){return this._formData||(this._formData=new v.FormData),this._formData.append(t,e),this},f.prototype.attach=function(t,e,n){return this._formData||(this._formData=new v.FormData),this._formData.append(t,e,n),this},f.prototype.send=function(t){var e=i(t),n=this.getHeader("Content-Type");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||o(t)?this:(n||this.type("json"),this)},f.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},f.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},f.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(t){var e=this,n=this.xhr=d.getXHR(),i=this._query.join("&"),a=this._timeout,s=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var c=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=c);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=c)}catch(u){}if(a&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},a)),i&&(i=d.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!o(s)){var l=this.getHeader("Content-Type"),p=d.serialize[l?l.split(";")[0]:""];p&&(s=p(s))}for(var f in this.header)null!=this.header[f]&&n.setRequestHeader(f,this.header[f]);return this.emit("request",this),n.send(s),this},f.prototype.then=function(t,e){return this.end(function(n,r){n?e(n):t(r)})},d.Request=f,d.get=function(t,e,n){var r=d("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},d.head=function(t,e,n){var r=d("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.del=function(t,e){var n=d("DELETE",t);return e&&n.end(e),n},d.patch=function(t,e,n){var r=d("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.post=function(t,e,n){var r=d("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.put=function(t,e,n){var r=d("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=d},{emitter:4,reduce:5}],4:[function(t,e,n){function r(t){return t?o(t):void 0}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],5:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},{}],6:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return a["default"].get("/products",t).set("Accept","application/json").end()}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./request"),a=r(i);n["default"]={getProducts:o},e.exports=n["default"]},{"./request":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("superagent-promise")(t("superagent"),Promise);n["default"]=r,e.exports=n["default"]},{superagent:3,"superagent-promise":2}],8:[function(t,e,n){"use strict";function r(t){alert(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={show:r},e.exports=n["default"]},{}],9:[function(t,e,n){"use strict";function r(t){console.log(t)}function o(t){var e={};return t.forEach(function(t){e[t.name]=t}),e}function i(t){a.push(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.log=r,n.makeSkuMap=o,n.resize=i;var a=[],s=null;window.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(function(){a.forEach(function(t){t()})},200)},!1)},{}],10:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),i(e,[{key:"render",value:function(){var t=(this.props.size||48)+"px",e={height:t,width:t};return React.createElement("a",{href:"/users/"+this.props.user._id},React.createElement("img",{className:"avatar",style:e,src:this.props.user.avatar}))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],11:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,[{key:"onActivate",value:function(t,e){this.props.onCateChange&&this.props.onCateChange(e)}},{key:"getCateItems",value:function(){var t=this;return this.props.categories.map(function(e,n){var r=e._id===t.props.activeCateId?"category-item active":"category-item";return React.createElement("li",{className:r,key:e._id,onClick:t.onActivate.bind(t,n,e),onTouchStart:t.onActivate.bind(t,n,e)},e.name)})}},{key:"render",value:function(){return React.createElement("div",{className:"categories-bar"},React.createElement("ul",null,this.getCateItems()))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],12:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,[{key:"render",value:function(){return React.createElement("div",{className:"footer"},React.createElement("div",{className:"footer-align"},React.createElement("a",{href:"#",className:"cell"},"å…³äºæå®¢æ·˜"),React.createElement("a",{href:"#",className:"cell"},"Github"),React.createElement("a",{href:"#",className:"cell"},"Teamï¼šç‰¹ğŸ¶ï¼Œ6174ï¼Œlivoras"),React.createElement("a",{href:"#",className:"cell"},"Copyright@æå®¢æ·˜")))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],13:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),i(e,[{key:"render",value:function(){return React.createElement("div",{className:"hot-topic-slide"})}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],14:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,[{key:"render",value:function(){var t=this.props.isShow?"mask show":"mask";return React.createElement("div",{className:t})}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,[{key:"getItems",value:function(){var t=this;return 0!==this.props.menus.length?React.createElement("ul",{className:"menus"},this.props.menus.map(function(e,n){return React.createElement("li",{className:"menu-item",key:n},React.createElement("a",{className:n===t.props.activeIndex?"active":"",href:e.url},e.name))})):React.createElement("span",null)}},{key:"render",value:function(){return React.createElement("div",{className:"menus-wrapper"},React.createElement("h1",null,React.createElement("a",{href:"/"},"æå®¢æ·˜")))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],16:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={isShow:!1},this.pageCount=this.recount()}return o(e,t),i(e,[{key:"componentWillUpdate",value:function(){this.pageCount=this.recount()}},{key:"recount",value:function(){var t=this.props.totalCount,e=this.props.pageCapacity,n=Math.floor(t/e);return t%e!==0&&n++,n}},{key:"show",value:function(){this.setState({isShow:!0})}},{key:"hide",value:function(){this.setState({isShow:!1})}},{key:"pages",value:function(){var t=this.state.isShow?"active":"";return React.createElement("div",{className:"pages page-unit",onClick:this.show.bind(this),onTouchStart:this.show.bind(this),onMouseLeave:this.hide.bind(this)},React.createElement("ul",{className:t},this.pageItems()),React.createElement("span",{className:"page-item"},"ç¬¬ ",this.props.currentPage," é¡µ"))}},{key:"selectPage",value:function(t,e){e.stopPropagation(),t!==this.props.currentPage&&(this.setState({currentPage:t,isShow:!1}),"function"==typeof this.props.onPageChange&&this.props.onPageChange(t))}},{key:"pageItems",value:function(){for(var t=[],e=this.pageCount;0!=e;e--){var n=e===this.props.currentPage?"active":null;t.push(React.createElement("li",{className:n,key:e,onTouchEnd:this.selectPage.bind(this,e),onClick:this.selectPage.bind(this,e)},React.createElement("span",{className:"page-item"},"ç¬¬ ",e," é¡µ")))}return t}},{key:"previousPage",value:function(){return 1!==this.props.currentPage?React.createElement("div",{className:"previous-page page-unit",onTouchStart:this.selectPage.bind(this,this.props.currentPage-1),onClick:this.selectPage.bind(this,this.props.currentPage-1)},"ä¸Šä¸€é¡µ"):void 0}},{key:"nextPage",value:function(){return this.props.currentPage!==this.pageCount?React.createElement("div",{className:"next-page page-unit",onClick:this.selectPage.bind(this,this.props.currentPage+1),onTouchStart:this.selectPage.bind(this,this.props.currentPage+1)},"ä¸‹ä¸€é¡µ"):void 0}},{key:"render",value:function(){return this.recount(),React.createElement("div",{className:"paginate"},React.createElement("div",{className:"paginate-align"},this.previousPage(),this.pages(),this.nextPage()))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],17:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},c=t("./product"),u=r(c),l=function(t){function e(){o(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return i(e,t),a(e,[{key:"render",value:function(){var t=this,e=function(){return t.props.products.map(function(t){return React.createElement(u["default"],{product:t,key:t._id})})};return React.createElement("div",null,e())}}]),e}(React.Component);n["default"]=l,e.exports=n["default"]},{"./product":18}],18:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,[{key:"render",value:function(){return React.createElement("div",{className:"product"},React.createElement("div",{className:"item-right"},React.createElement("img",{src:this.props.product.details.pictures[0]})),React.createElement("div",{className:"item-left"},React.createElement("h3",{className:"item-title"},React.createElement("a",{href:"/products/"+this.props.product._id},this.props.product.title)),React.createElement("p",{className:"item-content"},this.props.product.content.brief,"..."),React.createElement("div",{className:"item-info"},React.createElement("span",{className:"item-publish-date"},this.props.product.date," å‘å¸ƒ"),"| Â ",React.createElement("span",{className:"item-publish-upvote"},this.props.product.details.upvote," äººè§‰å¾—å¾ˆèµ"))))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],19:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),i(e,[{key:"render",value:function(){return React.createElement("div",{className:"recommendation-slider"})}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],20:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),i(e,[{key:"render",value:function(){var t="å—–ï½ï¼";return React.createElement("div",{className:"search"},React.createElement("input",{type:"text",placeholder:this.props.placeholder||t}),React.createElement("span",{className:"search-icon center"},React.createElement("i",{className:"fa fa-search"})))}}]),e}(React.Component);n["default"]=s,e.exports=n["default"]},{}],21:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);

if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},s=t("../common/util"),c=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onResize()}return o(e,t),i(e,[{key:"onResize",value:function(){s.resize(this.forceUpdate.bind(this))}},{key:"getStyles",value:function(t,e,n){var t=document.body.offsetWidth;t=.96*t>960?960:.96*t,e=.4167*t;var r=2,o=t/2;return 400>t&&(n=2),{overview:{width:t+"px",height:e+"px"},right:{width:(t-n-r)/2+"px",marginLeft:n+"px"},left:{width:(t-n)/2+"px"},rightUp:{height:(e-n)/2+"px",marginBottom:n+"px"},rightBottom:{height:(e-n)/2+"px"},rightBottomLeft:{width:(o-n)/2-r+"px",marginRight:n+"px"},rightBottomRight:{width:function(){return 2===n?(o-n)/2+"px":(o-n)/2-r+"px"}()}}}},{key:"render",value:function(){var t=this.props.width||960,e=this.props.height||400,n=5,r=this.getStyles(t,e,n);return React.createElement("div",{className:"sku",style:r.overview,ref:"wrapper"},React.createElement("a",{href:this.props.skus[0].url,target:"_blank"},React.createElement("div",{className:"sku-left",style:r.left},React.createElement("img",{src:this.props.skus[0].picture,className:"pic"}))),React.createElement("div",{className:"sku-right",style:r.right},React.createElement("a",{href:this.props.skus[1].url,target:"_blank"},React.createElement("div",{className:"sku-right-up",style:r.rightUp},React.createElement("img",{src:this.props.skus[1].picture,className:"pic"}))),React.createElement("div",{className:"sku-right-bottom",style:r.rightBottom},React.createElement("a",{href:this.props.skus[2].url,target:"_blank"},React.createElement("div",{className:"sku-right-bottom-left",style:r.rightBottomLeft},React.createElement("img",{src:this.props.skus[2].picture,className:"pic"}))),React.createElement("a",{href:this.props.skus[3].url,target:"_blank"},React.createElement("div",{className:"sku-right-bottom-right",style:r.rightBottomRight},React.createElement("img",{src:this.props.skus[3].picture,className:"pic"}))))))}}]),e}(React.Component);n["default"]=c,e.exports=n["default"]},{"../common/util":9}],22:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;s=u=c=void 0,r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=i,n=a,r=!0}},c=(t("./common/util"),t("./components/product-list")),u=r(c),l=t("./components/menu"),p=r(l),f=t("./components/search"),d=r(f),h=t("./components/avatar"),m=(r(h),t("./components/recommendation-slider")),v=r(m),y=t("./components/hot-topic-slide"),g=r(y),b=t("./components/sku"),w=r(b),E=t("./components/categories-bar"),O=r(E),_=t("./components/paginate"),j=r(_),P=t("./components/footer"),C=r(P),k=t("./components/mask"),x=r(k),R=t("../../test/fixtures/products"),T=r(R),N=t("./apis/products"),S=r(N),D=t("./common/modal"),M=r(D),q=window.menus||[{name:"é¦–é¡µ",url:"/"},{name:"å…³äº",url:"/about"},{name:"...",url:"/"}],L=0,I=window.productCategories||[{name:"æ‰€æœ‰",_id:0},{name:"ç”µè„‘",_id:1},{name:"é”®ç›˜",_id:2},{name:"åŠå…¬æ¤…",_id:3},{name:"è½¯ä»¶",_id:4},{name:"èƒŒåŒ…",_id:5},{name:"é¸¡é¸¡",_id:6}],F=window.activeProductCategoryId||0,H=window.products||T["default"](20),A=window.totalProuctCount||100,B=window.postCategories||[{name:"æ‰€æœ‰",_id:0},{name:"ç”µè„‘",_id:1},{name:"é”®ç›˜",_id:2},{name:"åŠå…¬æ¤…",_id:3},{name:"è½¯ä»¶",_id:4},{name:"èƒŒåŒ…",_id:5},{name:"é¸¡é¸¡",_id:6}],U=window.activePostCategoryId||0,z=window.posts||[],X=window.totalPostCount||100,J=window.skus||[{name:"home-sku1",url:"http://baidu.com",picture:"assets/watch.jpg"},{name:"home-sku2",url:"http://weibo.com",picture:"assets/mac.png"},{name:"home-sku3",url:"http://mp.weixin.qq.com",picture:"assets/arduino.jpg"},{name:"home-sku4",url:"http://zhihu.com",picture:"assets/phone2.png"}],G=10,W=function(t){function e(t){o(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={menus:q,activeMenuIndex:L,productCategories:I,products:H,activeProductCategoryId:F,totalProuctCount:A,postCategories:B,posts:z,activePostCategoryId:U,totalPostCount:X,currentPage:1}}return i(e,t),a(e,[{key:"onCateChange",value:function(t){this.state.isLoading||this.setState({activeProductCategoryId:t._id,currentPage:1},this.load.bind(this))}},{key:"onPageChange",value:function(t){this.setState({currentPage:t},this.load.bind(this))}},{key:"load",value:function(){var t=this;this.state.isLoading||(this.moveToTop(),this.setState({isLoading:!0}),S["default"].getProducts({categoryId:this.state.activeProductCategoryId,pageNum:this.state.currentPage,pageCount:G}).then(function(e){var n=e.body;t.setState({products:n.list,totalProuctCount:n.totalCount,isLoading:!1})})["catch"](function(e,n,r){M["default"].show(r),t.setState({isLoading:!1})}))}},{key:"moveToTop",value:function(){var t=React.findDOMNode(this.refs.catebar);window.scrollY>t.offsetTop&&window.scrollTo(0,t.offsetTop)}},{key:"skus",value:function(){return window.hideSkus?"":React.createElement(w["default"],{skus:J})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{className:"nav-bar"},React.createElement(p["default"],{menus:this.state.menus,activeIndex:this.state.activeMenuIndex}),React.createElement("div",{className:"align-content"},React.createElement(d["default"],null))),React.createElement("div",{className:"content"},this.skus(),React.createElement(O["default"],{ref:"catebar",categories:this.state.productCategories,activeCateId:this.state.activeProductCategoryId,onCateChange:this.onCateChange.bind(this)}),React.createElement("div",{className:"content-left"},React.createElement(x["default"],{isShow:this.state.isLoading}),React.createElement(u["default"],{products:this.state.products}),React.createElement(j["default"],{totalCount:this.state.totalProuctCount,pageCapacity:G,currentPage:this.state.currentPage,onPageChange:this.onPageChange.bind(this)})),React.createElement("div",{className:"content-right"},React.createElement(v["default"],null),React.createElement(g["default"],null))),React.createElement(C["default"],null))}}]),e}(React.Component);React.render(React.createElement(W,null),document.getElementById("wrapper"))},{"../../test/fixtures/products":23,"./apis/products":6,"./common/modal":8,"./common/util":9,"./components/avatar":10,"./components/categories-bar":11,"./components/footer":12,"./components/hot-topic-slide":13,"./components/mask":14,"./components/menu":15,"./components/paginate":16,"./components/product-list":17,"./components/recommendation-slider":19,"./components/search":20,"./components/sku":21}],23:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("object-assign"),i=r(o),a=t("./util"),s='<p>å¯ä»¥æŠŠä¸Šé¢çš„â€œæ–°æ–‡ç« â€çœ‹æˆæ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œâ€œè®¢é˜…æ–‡ç« â€åˆ™æ˜¯â€œ<strong>ç›‘å¬</strong>â€è¿™ä¸ªäº‹ä»¶ï¼Œâ€œå‘å¸ƒæ–°æ–‡ç« â€åˆ™æ˜¯â€œ<strong>è§¦å‘</strong>â€è¿™ä¸ªäº‹ä»¶ï¼Œâ€œå–æ¶ˆè®¢é˜…æ–‡ç« â€å°±æ˜¯â€œ<strong>å–æ¶ˆç›‘å¬</strong>â€â€œæ–°æ–‡ç« â€è¿™ä¸ªäº‹ä»¶ã€‚å‡å¦‚â€œ<strong>ç›‘å¬</strong>â€ç”¨<code>on</code>æ¥è¡¨ç¤ºï¼Œâ€œ<strong>è§¦å‘</strong>â€ç”¨<code>emit</code>æ¥è¡¨ç¤ºï¼Œâ€œ<strong>å–æ¶ˆç›‘å¬</strong>â€ç”¨<code>off</code>æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆä¸Šé¢çš„ä»£ç å¯ä»¥é‡æ–°è¡¨ç¤ºä¸ºï¼š</p>\n\n<pre><code>var blog = new Blog; // å‡è®¾å·²æœ‰ä¸€ä¸ªBlogç±»å®ç°onã€emitã€offæ–¹æ³•\n\nvar readerFunc1 = function(blogContent) {\n    console.log(blogContent + " will be shown here.");\n}\nvar readerFunc2 = function(blogContent) {\n    console.log(blogContent + " will be shown here, too.");\n}\n\nblog.on("new post", readerFunc1); // è¯»è€…1ç›‘å¬äº‹ä»¶\nblog.on("new post", readerFunc2); // è¯»è€…2ç›‘å¬äº‹ä»¶\n\nblog.emit("new post", "This is blog content."); // å‘å¸ƒåšå®¢å†…å®¹ï¼Œè§¦å‘äº‹ä»¶ï¼Œä¸Šé¢çš„ä¸¤ä¸ªè¯»è€…çš„å‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨\nblog.off("new post", readerFunc1); // è¯»è€…1å–æ¶ˆç›‘å¬äº‹ä»¶\nblog.emit("new post", "This is another blog content."); // readerFunc1å‡½æ•°ä¸å†è°ƒç”¨ï¼ŒreaderFunc2ç»§ç»­è°ƒç”¨\n</code></pre>\n\n<p>è¿™å°±æ˜¯å‰ç«¯ä¸­è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å…·ä½“çš„è¡¨ç°ï¼Œä½¿ç”¨<code>on</code>æ¥ç›‘å¬ç‰¹å®šçš„äº‹ä»¶ï¼Œ<code>emit</code>è§¦å‘ç‰¹å®šçš„äº‹ä»¶ï¼Œ<code>off</code>å–æ¶ˆç›‘å¬ç‰¹å®šçš„äº‹ä»¶ã€‚å†ä¸¾ä¸€ä¸ªåœºæ™¯â€œå°çŒ«å¬åˆ°å°ç‹—å«å°±ä¼šè·‘â€ï¼š</p>\n\n<pre><code>var dog = new Dog;\nvar cat = new Cat;\n\ndog.on("park", function() {\n    cat.run();\n});\n\ndog.emit("park");\n</code></pre>\n\n<p>å·§å¦™åˆ©ç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥è®©å‰ç«¯åº”ç”¨å¼€å‘è€¦åˆæ€§å˜å¾—æ›´åŠ ä½ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ã€‚å¯èƒ½è¯´â€œå˜å¾—æ›´æœ‰è¶£â€ä¼šæ˜¾å¾—æœ‰ç‚¹ä¸ä¸“ä¸šï¼Œä½†ç¡®å®ä¼šå˜å¾—æœ‰è¶£ã€‚</p>\n\n<h3>1.2 EventEmitter2</h3>\n\n<p>ä¸Šé¢å¯èƒ½æ¯”è¾ƒç–‘æƒ‘çš„ä¸€ä¸ªç‚¹å°±æ˜¯ï¼Œ<code>on</code>ã€<code>emit</code>ã€<code>off</code>å‡½æ•°è¯¥æ€ä¹ˆå®ç°ï¼Ÿ</p>\n\n<p>å¦‚æœè¦è‡ªå·±å®ç°ä¸€éä¹Ÿä¸å¾ˆå¤æ‚ï¼šæ¯ä¸ªâ€œäº‹ä»¶åâ€å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œæ¯æ¬¡<code>on</code>æŸä¸ªäº‹ä»¶çš„æ—¶å€™å°±æ˜¯æŠŠå‡½æ•°å‹åˆ°å¯¹åº”çš„å‡½æ•°æ•°ç»„å½“ä¸­ï¼›æ¯æ¬¡<code>emit</code>çš„æ—¶å€™ç›¸å½“äºæŠŠäº‹ä»¶åå¯¹åº”çš„å‡½æ•°æ•°ç»„éå†ä¸€éè¿›è¡Œè°ƒç”¨ï¼›æ¯æ¬¡<code>off</code>çš„æ—¶å€™æŠŠç›®æ ‡å‡½æ•°ä»æ•°ç»„å½“ä¸­å‰”é™¤ã€‚<a href="https://github.com/livoras/stereojs/blob/master/src/events.js">è¿™é‡Œ</a>æœ‰ä¸ªç®€å•çš„å®ç°ï¼Œæœ‰å…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>\n\n<p>é‡å¤å‘æ˜è½®å­çš„äº‹æƒ…å°±ä¸è¦åšäº†ï¼Œå…¶å®ç°æˆæœ‰å¾ˆå¤šJavaScriptçš„äº‹ä»¶åº“ï¼Œç›´æ¥æ‹¿æ¥ç”¨å°±å¥½äº†ã€‚æ¯”è¾ƒæµè¡Œã€å¸¸ç”¨çš„å°±æ˜¯<a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a>è¿™ä¸ªäº‹ä»¶åº“ï¼Œæœ¬æ–‡ä¸»è¦ä½¿ç”¨è¿™ä¸ªåº“æ¥å±•å¼€å¯¹è§‚å¯Ÿè€…æ¨¡å¼åœ¨å‰ç«¯åº”ç”¨ä¸­çš„è®¨è®ºã€‚ä½†å®é™…ä¸Šï¼Œ<strong>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•è‡ªå·±æ„å»ºçš„æˆ–è€…ç¬¬ä¸‰æ–¹çš„äº‹ä»¶åº“æ¥å®è·µæœ¬æ–‡æ‰€æåŠçš„åº”ç”¨æ–¹å¼</strong>ã€‚</p>\n\n<h2>2. EventEmitter2 ç®€ä»‹</h2>\n\n<ul>\n  <li>FUCK</li>\n  <li>FUCK2</li>\n  <li>FUCKx3</li>\n  <li>FUCKx4</li>\n  <li>FUCKx6</li>\n</ul>\n\n<p>EventEmitteræœ¬æ¥æ˜¯Node.jsä¸­è‡ªå¸¦çš„<code>events</code>æ¨¡å—ä¸­çš„ä¸€ä¸ªç±»ï¼Œå¯è§<a href="https://nodejs.org/api/events.html">Node.jsæ–‡æ¡£</a>ã€‚å¯ä¾›å¼€å‘è€…è‡ªå®šä¹‰äº‹ä»¶ï¼Œåæ¥æœ‰äººæŠŠå®ƒé‡æ–°å®ç°äº†ä¸€éï¼Œä¼˜åŒ–äº†å®ç°æ–¹å¼ï¼Œæé«˜äº†æ€§èƒ½ï¼Œæ–°å¢äº†ä¸€äº›æ–¹ä¾¿çš„APIï¼Œè¿™å°±æ˜¯<a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a>ã€‚å½“ç„¶ï¼Œåæ¥é™†ç»­å‡ºç°äº†<a href="https://www.npmjs.com/package/eventemitter3">EventEmitter3</a>ï¼Œ<a href="https://www.npmjs.com/package/eventemitter4">EventEmitter4</a>ã€‚å¯è§æ²¡æœ‰å¥³æœ‹å‹çš„ç¨‹åºå‘˜ä¹Ÿæ˜¯æ¯”è¾ƒæ— èŠåœ°åªå¥½é‡å¤å‘æ˜å’Œä¼˜åŒ–è½®å­ã€‚</p>\n\n<p>EventEmitter2å¯ä»¥ä¾›æµè§ˆå™¨ã€æˆ–è€…Node.jsä½¿ç”¨ã€‚å®‰è£…è¿‡ç¨‹å’ŒAPIå°±ä¸åœ¨è¿™é‡Œç´¯è¿°ï¼Œå‚ç…§å®˜æ–¹æ–‡æ¡£å³å¯ã€‚ä½¿ç”¨Browserifyæˆ–è€…Node.jså¯ä»¥éå¸¸æ–¹ä¾¿åœ°å¼•ç”¨EvenEmitter2ï¼Œåªéœ€è¦requireå³å¯ã€‚ç¤ºä¾‹ï¼š</p>\n\n<pre><code>var EventEmitter2 = require(\'eventemitter2\').EventEmitter2;\nvar emitter = new EventEmitter2;\n\nemitter.on("Hello World", function() {\n    console.log("Somebody said: Hello world.");\n});\n\nemitter.emit("Hello World"); // è¾“å‡º Somebody said: Hello world.\n</code></pre>\n\n<h3>2.1 EventEmitter2ä½œä¸ºçˆ¶ç±»ç»™ç»™å­ç±»æä¾›äº‹ä»¶æœºåˆ¶</h3>\n\n<p>ä½†åœ¨å®é™…åº”ç”¨å½“ä¸­ï¼Œå¾ˆå°‘å•çº¯EventEmitterç›´æ¥å®ä¾‹åŒ–æ¥ä½¿ç”¨ã€‚æ¯”è¾ƒå¤šçš„åº”ç”¨åœºæ™¯æ˜¯ï¼Œä¸ºæŸäº›å·²æœ‰çš„ç±»æ·»åŠ äº‹ä»¶çš„åŠŸèƒ½ã€‚å¦‚ä¸Šé¢çš„ç¬¬ä¸€ç« ä¸­çš„â€œå°çŒ«å¬åˆ°å°ç‹—å«å°±ä¼šè·‘â€çš„ä¾‹å­ï¼Œ<code>Cat</code>å’Œ<code>Dog</code>ç±»æœ¬èº«å°±æœ‰è‡ªå·±çš„ç±»å±æ€§ã€æ–¹æ³•ï¼Œéœ€è¦çš„æ˜¯ä¸ºå·²æœ‰çš„Catã€Dogæ·»åŠ äº‹ä»¶åŠŸèƒ½ã€‚è¿™é‡Œå°±éœ€è¦è®©EventEmitterä½œä¸ºå…¶ä»–ç±»çš„çˆ¶ç±»è¿›è¡Œç»§æ‰¿ã€‚</p>\n\n<pre><code>var EventEmitter2 = require(\'eventemitter2\').EventEmitter2;\n\n// Catå­ç±»ç»§æ‰¿çˆ¶ç±»æ„é€ å­—\nfunction Cat() {\n    EventEmitter2.apply(this);\n    // Cat æ„é€ å­ï¼Œå±æ€§åˆå§‹åŒ–ç­‰\n}\n\n// åŸå‹ç»§æ‰¿\nCat.prototype = Object.create(EventEmitter2.prototype);\nCat.prototype.constructor = Cat; // =&gt; è¿™ä¸¤è¡Œçœ‹ä¸æ‡‚çš„å¯ä»¥å…ˆå¤ä¹ ä¸€ä¸‹JS\n\n// Catç±»æ–¹æ³•\nCat.prototype.run = function () {\n    console.log("This cat is running...");\n}\n\nvar cat = new Cat;\nconsole.assert(typeof cat.on == "function"); // =&gt; true\nconsole.assert(typeof cat.run == "function"); // =&gt; true\n</code></pre>\n\n<p>å¾ˆæ£’æ˜¯å§ï¼Œè¿™æ ·å°±å¯ä»¥å³æœ‰EventEmitter2çš„åŸå‹æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®šä¹‰Catè‡ªèº«çš„æ–¹æ³•ã€‚</p>\n\n<p>è¿™ä¸€ç‚¹éƒ½ä¸æ£’ï¼æ¯æ¬¡å®šä¹‰ä¸€ä¸ªç±»éƒ½è¦é‡æ–°å†™ä¸€å †å•°å—¦çš„ä¸œè¥¿ï¼Œä¸‹é¢åšä¸ªç»§æ‰¿çš„æ”¹è¿›ï¼šæ„å»ºä¸€ä¸ªå‡½æ•°ï¼Œåªéœ€è¦ä¼ å…¥å·²ç»å®šä¹‰å¥½çš„ç±»å°±å¯ä»¥åœ¨ä¸å½±å“ç±»åŸæœ‰åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œè®©å…¶æ‹¥æœ‰EventEmitter2çš„åŠŸèƒ½ï¼š</p>\n\n<pre><code>// Function `eventify`: Making a class get power of EventEmitter2!\n// @copyright: Livoras\n// @date: 2015/3/27\n// All rights reserve!\n\nfunction eventify(klass) {\n    if (klass.prototype instanceof EventEmitter2) {\n        console.warn("Class has been eventified!");\n        return klass;\n    }\n\n    function Tempt() {\n        klass.apply(this, arguments);\n        EventEmitter2.call(this);\n    };\n    function Tempt2() {};\n\n    Tempt2.prototype = Object.create(EventEmitter2.prototype)\n    Tempt2.prototype.constructor = EventEmitter2;\n\n    var temptProp = Object.create(Tempt2.prototype);\n    var klassProp = klass.prototype;\n\n    for (var attr in klassProp) {\n        temptProp[attr] = klassProp[attr];\n    }\n\n    Tempt.prototype = temptProp;\n    Tempt.prototype.constructor = klass;\n\n    return Tempt;\n}\n</code></pre>\n\n<p>ä¸Šé¢çš„ä»£ç å¯ä»¥çš„å®ç°åŸç†åœ¨è¿™é‡Œå¹¶ä¸é‡è¦çš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹ä¸€ç¯‡åšå®¢ï¼Œè®¨è®º<code>eventify</code>çš„å®ç°åŸç†ã€‚åœ¨è¿™é‡Œåªéœ€è¦çŸ¥é“ï¼Œæœ‰äº†eventifyå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç»™ç±»æ·»åŠ EventEmitter2çš„åŠŸèƒ½ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n\n<pre><code>// Dogç±»çš„æ„é€ å‡½æ•°å’ŒåŸå‹æ–¹æ³•å®šä¹‰\nfunction Dog(name) {\n  this.name = name;\n}\n\nDog.prototype.park = function() {\n  console.log(this.name + " parking....");\n}\n\n// ä½¿Dogå…·æœ‰EventEmitter2åŠŸèƒ½\nDog = eventify(Dog);\nvar dog = new Dog("Jerry");\n\ndog.on("somebody is coming", function() {\n    dog.park();\n})\n\ndog.emit("somebody is coming") // è¾“å‡º Jerry is parking....\n</code></pre>\n\n<p>å¦‚ä¸Šé¢çš„ä»£ç ï¼Œç°åœ¨æ²¡æœ‰å¿…è¦ä¸ºDogç±»é‡æ–°ä¹¦å†™ç±»ç»§æ‰¿ä»£ç ï¼Œåªéœ€è¦æŒ‰æ­£å¸¸çš„æ–¹å¼å®šä¹‰å¥½Dogç±»ï¼Œç„¶åä¼ å…¥eventifyå‡½æ•°å³å¯ä½¿Dogè·å–EventEmitter2çš„åŠŸèƒ½ã€‚æœ¬æ–‡æ¥ä¸‹æ¥çš„è®¨è®ºä¼šæŒç»­ä½¿ç”¨<code>eventify</code>å‡½æ•°ã€‚</p>\n\n<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ æ­£åœ¨ä½¿ç”¨CoffeeScriptï¼Œç›´æ¥ä½¿ç”¨CoffeeScriptè‡ªå¸¦çš„extendsè¿›è¡Œç±»ç»§æ‰¿å³å¯ï¼Œæ— éœ€ä¸Šé¢å¤æ‚çš„ä»£ç ï¼š</p>\n\n<pre><code>class Dog extends EventEmitter2\n    constructor: -&gt;\n        super.apply @, arguments\n    park: -&gt;\n        // ...\n</code></pre>\n\n<h2>3. EventEmitter2 åœ¨ç»„ä»¶åŒ–çš„å‰ç«¯æ¶æ„ä¸­çš„åº”ç”¨</h2>\n\n<h3>3.1 ç»„ä»¶åŒ–çš„å‰ç«¯æ¶æ„</h3>\n\n<p>å½“ä¸€ä¸ªå‰ç«¯åº”ç”¨è¶³å¤Ÿå¤æ‚çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦å¯¹åº”ç”¨è¿›è¡Œâ€œç»„ä»¶åŒ–â€ã€‚æ‰€è°“ç»„ä»¶åŒ–ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤§çš„åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªå°çš„åº”ç”¨ã€‚æ¯ä¸ªâ€œåº”ç”¨â€å…·æœ‰è‡ªå·±ç‹¬ç‰¹çš„ç»“æ„å’Œå†…å®¹ã€æ ·å¼å’Œä¸šåŠ¡é€»è¾‘ï¼Œè¿™äº›å°çš„åº”ç”¨ç§°ä¸ºâ€œç»„ä»¶â€ï¼ˆComponentï¼‰ã€‚ç»„ä»¶çš„å¤ç”¨æ€§ä¸€èˆ¬å¾ˆå¼ºï¼Œæ˜¯DRYåŸåˆ™çš„å…¸èŒƒï¼Œå¤šä¸ªç»„ä»¶çš„åµŒå¥—ã€ç»„åˆï¼Œæ„å»ºæˆäº†ä¸€ä¸ªå®Œæˆè€Œå¤æ‚çš„åº”ç”¨ã€‚</p>\n\n<p>ä¸¾æˆ‘åœ¨ã€Š<a href="http://livoras.com/post/22">ä¸€ç§SPAï¼ˆå•é¡µé¢åº”ç”¨ï¼‰æ¶æ„</a>ã€‹ä¸¾è¿‡çš„ä¾‹å­ï¼Œåšå®¢çš„è¯„è®ºåŠŸèƒ½ç»„ä»¶ï¼š</p>\n\n<p><img src="https://cloud.githubusercontent.com/assets/6436132/3597178/7cc6cd9c-0cce-11e4-8d7e-53f9e113d4c2.jpg" alt="comments-replies-poputbox"></p>\n\n<p>è¿™ä¸ªè¯„è®ºç»„ä»¶çš„åŠŸèƒ½å¤§æ¦‚å¦‚æ­¤ï¼š<strong>å¯æ˜¾ç¤ºå¤šæ¡è¯„è®ºï¼ˆcommentï¼‰ï¼›æ¯æ¡è¯„è®ºå¤šæ¡æœ‰è‡ªå·±çš„å›å¤ï¼ˆreplyï¼‰ï¼›è¯„è®ºæˆ–è€…å›å¤éƒ½ä¼šæ˜¾ç¤ºæœ‰ç”¨æˆ·å¤´åƒï¼Œé¼ æ ‡æ”¾åˆ°ç”¨æˆ·å¤´åƒä¸Šä¼šæ˜¾ç¤ºè¯¥ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆç±»ä¼¼å¾®åšçš„åŠŸèƒ½ï¼‰</strong>ã€‚</p>\n\n<p>è¿™é‡Œå¯ä»¥æŠŠè¿™ä¸ªåŠŸèƒ½åˆ†å¥½å‡ ä¸ªç»„ä»¶ï¼š</p>\n\n<ol>\n<li>æ•´ä½“è¯„è®ºåŠŸèƒ½ä½œä¸ºä¸€ä¸ªç»„ä»¶ï¼šcommentsBox</li>\n<li>commentsBoxæœ‰å­ç»„ä»¶ï¼ˆchild componentï¼‰commentè´Ÿè´£æ˜¾ç¤ºç”¨æˆ·çš„è¯„è®º</li>\n<li>æ¯ä¸ªcommentç»„ä»¶æœ‰å­ç»„ä»¶replayè´Ÿè´£æ˜¾ç¤ºç”¨æˆ·å¯¹è¯„è®ºçš„å›å¤</li>\n<li>commentsBoxæœ‰å­ç»„ä»¶user-info-cardè´Ÿè´£æ˜¾ç¤ºç”¨æˆ·çš„ä¿¡æ¯</li>\n</ol>\n\n\n<p>ç»„ä»¶è¿™æ ·çš„å…³ç³»å¯ä»¥ç”¨æ ‘çš„ç»“æ„æ¥è¡¨ç¤ºï¼š</p>\n\n<p><img class="mid" src="https://raw.githubusercontent.com/livoras/blog-images/master/events/1.png"></p>\n\n<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç»„ä»¶ä¹‹é—´çš„å…³ç³»ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šåµŒå¥—å’Œç»„åˆã€‚åµŒå¥—ï¼Œå¦‚ï¼Œæ¯ä¸ªcommentBoxæœ‰commentå’Œuser-info-cardï¼Œcommentå’Œuser-info-cardæ˜¯åµŒå¥—åœ¨commentBoxå½“ä¸­çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç»„ä»¶å’ŒcommentBoxä¹‹é—´éƒ½æ˜¯åµŒå¥—çš„å…³ç³»ï¼›ç»„åˆï¼Œcommentå’Œuser-info-cardéƒ½æ˜¯ä½œä¸ºcommentBoxçš„å­ç»„ä»¶å­˜åœ¨ï¼Œä»–ä»¬ä¸¤ä¸ªäº’ä¸ºå…„å¼Ÿï¼Œæ˜¯ç»„åˆçš„å…³ç³»ã€‚å¤„ç†ç»„ä»¶ä¹‹é—´çš„åµŒå¥—å’Œç»„åˆå…³ç³»æ˜¯æ¶æ„å±‚é¢éœ€è¦è§£å†³çš„æœ€é‡è¦çš„é—®é¢˜ä¹‹ä¸€ï¼Œä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ï¼Œæ•…ä¸ç´¯è¿°ã€‚ä½†æ¥ä¸‹æ¥æˆ‘ä»¬è®¨è®ºçš„â€œç»„ä»¶ä¹‹é—´ä»¥äº‹ä»¶çš„å½¢å¼è¿›è¡Œæ¶ˆæ¯ä¼ é€’â€å’Œè¿™äº›ç»„ä»¶ä¹‹é—´çš„å…³ç³»å¯†åˆ‡ç›¸å…³ã€‚</p>\n\n<p>å½“å¼€å§‹æŒ‰ç…§ä¸Šé¢çš„è®¾è®¡è¿›è¡Œç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ¯ä¸ªç»„ä»¶æ„å»ºä¸€ä¸ªè¶…ç±»ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½åº”è¯¥ç»§æ‰¿è¿™ä¸ªè¶…ç±»ï¼š</p>\n\n<p>component.js:</p>\n\n<pre><code>eventify = require("./eventify.js");\n\n// Componentæ„é€ å‡½æ•°\nfunction Component(parent) {\n    this.$el = $("...")\n    this.parent = parent;\n}\n\n// ComponentåŸå‹æ–¹æ³•\nComponent.prototype.init = function () {/* ... */};\n\nmodule.exports = eventify(Component);\n</code></pre>\n\n<p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒComponentåŸºæœ¬ä»€ä¹ˆå†…å®¹éƒ½æ²¡æœ‰ï¼Œå‡ ä¹åªæ˜¯ä¸€ä¸ªâ€œç©ºâ€çš„ç±»ï¼Œè€Œå®ƒé€šè¿‡eventifyå‡½æ•°è·å¾—äº†â€œè¶…èƒ½åŠ›â€ï¼Œæ‰€ä»¥ç»§æ‰¿Componentçš„ç±»åŒæ ·å…·æœ‰äº‹ä»¶çš„åŠŸèƒ½ã€‚</p>\n\n<p>æ³¨æ„Componentæ„é€ å‡½æ•°ï¼Œæ¯ä¸ªComponentåœ¨ç¤ºä¾‹åŒ–çš„æ—¶å€™åº”è¯¥ä¼ å…¥ä¸€ä¸ªå®ƒæ‰€å±çš„<strong>çˆ¶ç»„ä»¶</strong>çš„å®ä¾‹<code>parent</code>ï¼Œæ¥ä¸‹æ¥ä¼šçœ‹åˆ°ï¼Œç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡å¯ä»¥é€šè¿‡è¿™ä¸ªå®ä¾‹æ¥å®Œæˆã€‚è€Œ<code>$el</code>å¯ä»¥çœ‹ä½œæ˜¯è¯¥ç»„ä»¶æ‰€è´Ÿè´£çš„HTMLå…ƒç´ ã€‚</p>\n\n<h3>3.2 çˆ¶å­ã€å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’</h3>\n\n<p>ç°åœ¨æŠŠæ³¨æ„åŠ›æ”¾åœ¨commentsBoxã€commentã€user-info-cardä¸‰ä¸ªç»„ä»¶ä¸Šï¼Œæš‚ä¸”å¿½ç•¥replyã€‚</p>\n\n<p>ç›®å‰è¦å®ç°çš„åŠŸèƒ½æ˜¯ï¼šé¼ æ ‡æ”¾åˆ°commentç»„ä»¶çš„ç”¨æˆ·å¤´åƒä¸Šï¼Œå°±ä¼šæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚è¦æŠŠè¿™ä¸ªåŠŸèƒ½å®Œæˆå¤§æ¦‚æ˜¯è¿™ä¹ˆä¸€ä¸ªäº‹ä»¶æµç¨‹ï¼šcommentç»„ä»¶ç›‘å¬ç”¨æˆ·é¼ æ ‡æ”¾åœ¨å¤´åƒä¸Šçš„äº¤äº’äº‹ä»¶ï¼Œç„¶åé€šè¿‡<code>this.parent</code>å‘çˆ¶ç»„ä»¶ï¼ˆcommentsBoxï¼‰ä¼ é€’è¯¥äº‹ä»¶ï¼ˆ<code>this.parent</code>å°±æ˜¯commentsBoxï¼‰ï¼ŒcommentsBoxè·å–åˆ°è¯¥äº‹ä»¶ä»¥åè§¦å‘ä¸€ä¸ªäº‹ä»¶ç»™user-info-cardï¼Œuser-info-cardå¯ä»¥é€šè¿‡<code>this.parent</code>ç›‘å¬åˆ°è¯¥äº‹ä»¶ï¼Œæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚</p>\n\n<pre><code>// comment-component.js\n// ä»Componentç±»ä¸­ç»§æ‰¿è·å¾—Commentç±»\n// ...\n\n// åŸå‹æ–¹æ³•\nComment.prototype.init = function () {\n    var that = this;\n    this.$el.find("div.avatar").on("mouseover", function () {\n        // è¿™é‡Œçš„that.parentç›¸å½“äºçˆ¶ç»„ä»¶CommentsBoxï¼Œåœ¨Commentç»„ä»¶è¢«ç¤ºä¾‹åŒ–çš„æ—¶å€™ä¼ å…¥\n        that.parent.emit("comment:user-mouse-on-avatar", this.userId);\n    })\n}\n</code></pre>\n\n<p>]ä¸Šè¿°ä»£ç ä¸ºå½“ç”¨æˆ·æŠŠé¼ æ ‡æ”¾åˆ°ç”¨æˆ·å¤´åƒçš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶<code>comment:user-mouse-on-avatar</code>ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡<code>ç»„ä»¶å:äº‹ä»¶å</code>ç»™è¿™æ ·çš„äº‹ä»¶å‘½åæ–¹å¼å¯ä»¥åŒºåˆ†äº‹ä»¶çš„æ¥æºç»„ä»¶æˆ–ç›®æ ‡ç»„ä»¶ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚</p>\n',c={_id:0,title:"Chair for fucking",details:{pictures:["assets/chair.jpg","assets/arduino.jpg","assets/dji.jpg","assets/pig.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},u={_id:0,title:"Arduino",details:{pictures:["assets/arduino.jpg","assets/chair.jpg","assets/dji.jpg","assets/pig.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},l={_id:0,title:"DJI",details:{pictures:["assets/dji.jpg","assets/arduino.jpg","assets/chair.jpg","assets/pig.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},p={_id:0,title:"DJI",details:{pictures:["assets/pig.jpg","assets/arduino.jpg","assets/chair.jpg","assets/dji.jpg"],price:100,priceRange:{min:40,max:500}},content:{},date:"2015-07-28"},f=[c,u,l,p];n["default"]=function(t){var e=[];t=t||20*Math.random();for(var n=0,r=t;r>n;n++){var o=parseInt(f.length*Math.random()),c=i["default"]({},f[o]);c.title=c.title+"_"+n,c._id=n,c.content.brief=a.randomContent(),c.title=a.randomWord(),c.details.upvote=Math.floor(2e5*Math.random()),c.content.extended=s,c.details.ext={"é—­åˆæ–¹å¼":"å¥—è„š","é£æ ¼":"ç™¾æ­,æ—¶å°šä¼‘","å­£èŠ‚":"æ˜¥å­£","æ¬¾å¼":"å•","æµè¡Œå…ƒç´ ":"çº¯è‰²,é‡‘å±è£…é¥°","çš®è´¨ç‰¹å¾":"ç£¨ç ‚","è‰²ç³»":"æ£•è‰²","é€‚ç”¨åœºåˆ":"æ—¥å¸¸æºå¸¦,çº¦ä¼š,æ—¥å¸¸ä¼‘","é”€å”®å­£":"15å¹´æ˜¥å­£","é‹åº•æè´¨":"æ©¡èƒ¶","é‹è·Ÿå½¢çŠ¶":"å¹³è·Ÿ","å¤´":"åœ†","æ€§åˆ«":"ç”·å­","åˆ¶ä½œå·¥è‰º":"èƒ¶è´´çš®é‹ "},c.posts=[{_id:0,title:"ä¹ è¿‘å¹³ä¸»æŒæ”¿æ²»å±€ä¼šè®® é€šè¿‡ç¹è£æ–‡è‰ºæ„è§"},{_id:1,title:"ä¸­è¶Šè¾¹å¢ƒé›·åŒºå››ä¼:æœ‰æ‘åº„å¹³å‡æ¯æˆ·å°‘ä¸€æ¡è…¿"},{_id:0,title:"å¤©æ´¥çˆ†ç‚¸8åå¤±è”è€…è¢«ç¡®è®¤æ— ç”Ÿè¿˜å¯èƒ½"},{_id:1,title:"å¤®è§†å›åº”èŠ‚ç›®ä¸­ç›—æ’­ç½‘å‹ä½œå“:ç¼–è¾‘ç½‘è´­ä»˜è´¹è´­å¾—"}],e.push(c)}return e},e.exports=n["default"]},{"./util":24,"object-assign":1}],24:[function(t,e,n){"use strict";function r(t){t=t||Math.floor(2+25*Math.random());for(var e=o(),n=0;t>n;n++)e=e+" "+o();return e}function o(){for(var t="",e="abcdefghijklmnopqrstuvwxyz",n=Math.floor(3+10*Math.random()),r=0;n>r;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={randomWord:o,randomContent:r},e.exports=n["default"]},{}]},{},[22]);